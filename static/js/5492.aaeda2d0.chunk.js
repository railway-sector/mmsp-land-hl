"use strict";(self.webpackChunkmmsp_land_hl=self.webpackChunkmmsp_land_hl||[]).push([[5492],{420:(e,t,n)=>{n.d(t,{x:()=>i});var r=n(78393),o=n(38496),l=n(93345);function i(e,t){switch(t){case l.WR.TRIANGLES:return function(e){return"number"==typeof e?(0,o.tM)(e):(0,r.mg)(e)?new Uint16Array(e):e}(e);case l.WR.TRIANGLE_STRIP:return function(e){const t="number"==typeof e?e:e.length;if(t<3)return[];const n=t-2,r=(0,o.my)(3*n);if("number"==typeof e){let e=0;for(let t=0;t<n;t+=1)t%2==0?(r[e++]=t,r[e++]=t+1,r[e++]=t+2):(r[e++]=t+1,r[e++]=t,r[e++]=t+2)}else{let t=0;for(let o=0;o<n;o+=1)o%2==0?(r[t++]=e[o],r[t++]=e[o+1],r[t++]=e[o+2]):(r[t++]=e[o+1],r[t++]=e[o],r[t++]=e[o+2])}return r}(e);case l.WR.TRIANGLE_FAN:return function(e){const t="number"==typeof e?e:e.length;if(t<3)return new Uint16Array(0);const n=t-2,r=n<=65536?new Uint16Array(3*n):new Uint32Array(3*n);if("number"==typeof e){let e=0;for(let t=0;t<n;++t)r[e++]=0,r[e++]=t+1,r[e++]=t+2;return r}const o=e[0];let l=e[1],i=0;for(let u=0;u<n;++u){const t=e[u+2];r[i++]=o,r[i++]=l,r[i++]=t,l=t}return r}(e)}}},5492:(e,t,n)=>{n.r(t),n.d(t,{loadGLTFMesh:()=>U});var r=n(89379),o=n(69539),l=n(99746),i=n(3825),u=n(50076),a=n(87663),s=n(15941),c=n(86300),f=n(44680),d=n(9392),p=n(55855),m=n(79629),v=n(44032),y=n(75257),g=n(63713),h=n(56623),x=n(99773),T=n(88105),w=n(45136),b=n(10947),B=n(6381);Object.freeze(Object.defineProperty({__proto__:null,copy:function(e,t,n){var r,o;const l=e.typedBuffer,i=e.typedBufferStride,u=t.typedBuffer,a=t.typedBufferStride,s=n?n.count:t.count;let c=(null!==(r=null===n||void 0===n?void 0:n.dstIndex)&&void 0!==r?r:0)*i,f=(null!==(o=null===n||void 0===n?void 0:n.srcIndex)&&void 0!==o?o:0)*a;for(let d=0;d<s;++d){for(let e=0;e<9;++e)l[c+e]=u[f+e];c+=i,f+=a}}},Symbol.toStringTag,{value:"Module"}));Object.freeze(Object.defineProperty({__proto__:null,copy:function(e,t,n){var r,o;const l=e.typedBuffer,i=e.typedBufferStride,u=t.typedBuffer,a=t.typedBufferStride,s=n?n.count:t.count;let c=(null!==(r=null===n||void 0===n?void 0:n.dstIndex)&&void 0!==r?r:0)*i,f=(null!==(o=null===n||void 0===n?void 0:n.srcIndex)&&void 0!==o?o:0)*a;for(let d=0;d<s;++d){for(let e=0;e<16;++e)l[c+e]=u[f+e];c+=i,f+=a}}},Symbol.toStringTag,{value:"Module"}));n(39539);var S=n(52007);function A(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:3,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:n;const o=t.length/r;let l=0,i=0;for(let u=0;u<o;++u)e[l]=t[i],e[l+1]=t[i+1],e[l+2]=t[i+2],l+=n,i+=r}function _(e,t,n,r,o){var l,i;const u=e.typedBuffer,a=e.typedBufferStride,s=null!==(l=null===o||void 0===o?void 0:o.count)&&void 0!==l?l:e.count;let c=(null!==(i=null===o||void 0===o?void 0:o.dstIndex)&&void 0!==i?i:0)*a;for(let f=0;f<s;++f)u[c]=t,u[c+1]=n,u[c+2]=r,c+=a}Object.freeze(Object.defineProperty({__proto__:null,copy:A,copyView:function(e,t){A(e.typedBuffer,t.typedBuffer,e.typedBufferStride,t.typedBufferStride)},fill:_},Symbol.toStringTag,{value:"Module"}));function R(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:4;const r=t.typedBuffer,o=t.typedBufferStride,l=t.count;let i=0,u=0;for(let a=0;a<l;++a)e[i]=r[u],e[i+1]=r[u+1],e[i+2]=r[u+2],e[i+3]=r[u+3],i+=n,u+=o}function I(e,t,n,r,o,l){var i,u;const a=e.typedBuffer,s=e.typedBufferStride,c=null!==(i=null===l||void 0===l?void 0:l.count)&&void 0!==i?i:e.count;let f=(null!==(u=null===l||void 0===l?void 0:l.dstIndex)&&void 0!==u?u:0)*s;for(let d=0;d<c;++d)a[f]=t,a[f+1]=n,a[f+2]=r,a[f+3]=o,f+=s}Object.freeze(Object.defineProperty({__proto__:null,copy:R,copyView:function(e,t){R(e.typedBuffer,t,e.typedBufferStride)},fill:I},Symbol.toStringTag,{value:"Module"}));function E(e,t){return new e(new ArrayBuffer(t*e.ElementCount*(0,B.GJ)(e.ElementType)))}var j=n(53848),L=n(11109),C=n(43822),M=n(420),O=n(37040);async function U(e,t,n){const l=new L.R(function(e){const t=null===e||void 0===e?void 0:e.resolveFile;return t?{busy:!1,request:async(e,n,r)=>{var o;const l=null!==(o=null===t||void 0===t?void 0:t(e))&&void 0!==o?o:e,u=2===n?"image":1===n||3===n?"array-buffer":"json";return(await(0,i.A)(l,{responseType:u,signal:null===r||void 0===r?void 0:r.signal,timeout:0})).data}}:null}(n)),c=await(0,C.loadGLTF)(l,t,n,!0),f=c.model,m=f.lods.shift(),w=new Map,b=new Map;f.textures.forEach((e,t)=>w.set(t,function(e){return new y.A({data:((0,O.x3)(e.data),e.data),wrap:q(e.parameters.wrap)})}(e))),f.materials.forEach((e,t)=>b.set(t,function(e,t){const n=new o.A(function(e,t){return(0,p.fA)(N(e[0]),N(e[1]),N(e[2]),t)}(e.color,e.opacity)),r=e.emissiveFactor?new o.A(function(e){return(0,d.fA)(N(e[0]),N(e[1]),N(e[2]))}(e.emissiveFactor)):null,l=e=>{var t;return e?new g.A({scale:e.scale?[e.scale[0],e.scale[1]]:[1,1],rotation:(0,s.KJ)(null!==(t=e.rotation)&&void 0!==t?t:0),offset:e.offset?[e.offset[0],e.offset[1]]:[0,0]}):null};return new v.A({color:n,colorTexture:t.get(e.colorTexture),normalTexture:t.get(e.normalTexture),emissiveColor:r,emissiveTexture:t.get(e.emissiveTexture),occlusionTexture:t.get(e.occlusionTexture),alphaMode:F(e.alphaMode),alphaCutoff:e.alphaCutoff,doubleSided:e.doubleSided,metallic:e.metallicFactor,roughness:e.roughnessFactor,metallicRoughnessTexture:t.get(e.metallicRoughnessTexture),colorTextureTransform:l(e.colorTextureTransform),normalTextureTransform:l(e.normalTextureTransform),occlusionTextureTransform:l(e.occlusionTextureTransform),emissiveTextureTransform:l(e.emissiveTextureTransform),metallicRoughnessTextureTransform:l(e.metallicRoughnessTextureTransform)})}(e,w)));const B=function(e){let t=0;const n={color:!1,tangent:!1,normal:!1,texCoord0:!1},r=new Map,o=new Map,l=[];for(const i of e.parts){const{position:e,normal:u,color:s,tangent:c,texCoord0:f}=i.attributes,d="\n      ".concat(k(e,r),"/\n      ").concat(k(u,r),"/\n      ").concat(k(s,r),"/\n      ").concat(k(c,r),"/\n      ").concat(k(f,r),"/\n      ").concat(P(i.transform),"\n    ");let p=!1;const m=(0,a.tE)(o,d,()=>(p=!0,{start:t,length:e.count}));p&&(t+=e.count),u&&(n.normal=!0),s&&(n.color=!0),c&&(n.tangent=!0),f&&(n.texCoord0=!0),l.push({gltf:i,writeVertices:p,region:m})}return{vertexAttributes:{position:E(T.Xm,t),normal:n.normal?E(T.xs,t):null,tangent:n.tangent?E(T.Eq,t):null,color:n.color?E(T.XP,t):null,texCoord0:n.texCoord0?E(T.gH,t):null},parts:l,components:[]}}(m);for(const r of B.parts)z(B,r,b);const{position:S,normal:A,tangent:_,color:R,texCoord0:I}=B.vertexAttributes,M=(0,x.TE)(e,n),U=e.spatialReference.isGeographic?(0,x.TE)(e):M,G=(0,j.UR)({vertexAttributes:{position:S.typedBuffer,normal:null===A||void 0===A?void 0:A.typedBuffer,tangent:null===_||void 0===_?void 0:_.typedBuffer},vertexSpace:U,spatialReference:e.spatialReference},M,{allowBufferReuse:!0,sourceUnit:null!==n&&void 0!==n&&n.unitConversionDisabled?void 0:"meters"});if(!G)throw new u.A("load-gltf-mesh:vertex-space-projection","Failed to load mesh from glTF because we could not convert the vertex space from ".concat(U.type," to ").concat(M.type));return{mesh:{transform:null,vertexSpace:M,components:B.components,spatialReference:e.spatialReference,vertexAttributes:new h.H((0,r.A)((0,r.A)({},G),{},{color:null===R||void 0===R?void 0:R.typedBuffer,uv:null===I||void 0===I?void 0:I.typedBuffer}))},meta:c.meta}}function k(e,t){if(null==e)return"-";const n=e.typedBuffer;return"".concat((0,a.tE)(t,n.buffer,()=>t.size),"/").concat(n.byteOffset,"/").concat(n.byteLength)}function P(e){return null!=e?e.toString():"-"}function z(e,t,n){t.writeVertices&&function(e,t){const{position:n,normal:r,tangent:o,color:l,texCoord0:i}=e.vertexAttributes,u=t.region.start,{attributes:a,transform:d}=t.gltf,p=a.position.count;if((0,w.d)(n.slice(u,p),a.position,d),null!=a.normal&&null!=r){const e=(0,c.Ge)((0,f.vt)(),d),t=r.slice(u,p);(0,w.c)(t,a.normal,e),(0,s.or)(e)&&(0,w.e)(t,t)}else null!=r&&_(r,0,0,1,{dstIndex:u,count:p});if(null!=a.tangent&&null!=o){const e=(0,c.z0)((0,f.vt)(),d),t=o.slice(u,p);(0,b.a)(t,a.tangent,e),(0,s.or)(e)&&(0,b.n)(t,t)}else null!=o&&I(o,0,0,1,1,{dstIndex:u,count:p});if(null!=a.texCoord0&&null!=i?(0,S.n)(i.slice(u,p),a.texCoord0):null!=i&&(0,S.f)(i,0,0,{dstIndex:u,count:p}),null!=a.color&&null!=l){const e=a.color,t=l.slice(u,p);if(4===e.elementCount)e instanceof T.Eq?(0,b.l)(t,e,1,255):(e instanceof T.XP||e instanceof T.Uz)&&(0,b.l)(t,e,1/255,255);else{I(t,255,255,255,255);const n=T.eI.fromTypedArray(t.typedBuffer,t.typedBufferStride);e instanceof T.xs?(0,w.l)(n,e,1,255):(e instanceof T.eI||e instanceof T.nS)&&(0,w.l)(n,e,1/255,255)}}else null!=l&&I(l.slice(u,p),255,255,255,255)}(e,t);const{indices:r,attributes:o,primitiveType:l,material:i}=t.gltf;let u=(0,M.x)(r||o.position.count,l);const a=t.region.start;if(a){const e=new Uint32Array(u);for(let t=0;t<u.length;t++)e[t]+=a;u=e}e.components.push(new m.A({name:t.gltf.name,faces:u,material:n.get(i),shading:o.normal?"source":"flat",trustSourceNormals:!0}))}function F(e){switch(e){case"OPAQUE":return"opaque";case"MASK":return"mask";case"BLEND":return"blend"}}function q(e){return{horizontal:G(e.s),vertical:G(e.t)}}function G(e){switch(e){case 33071:return"clamp";case 33648:return"mirror";case 10497:return"repeat"}}function N(e){return e**(1/l.Tf)*255}},6381:(e,t,n)=>{function r(e){switch(e){case"u8":case"i8":return 1;case"u16":case"i16":case"f16":return 2;case"u32":case"i32":case"f32":return 4;case"f64":return 8}}n.d(t,{GJ:()=>r})},11109:(e,t,n)=>{n.d(t,{R:()=>a});var r=n(3825),o=n(98773),l=n(50076),i=n(50346),u=n(90534);class a{constructor(e){this._streamDataRequester=e}async loadJSON(e,t){return this._load(0,e,t)}async loadBinary(e,t){return(0,u.DB)(e)?((0,i.Te)(t),(0,u.lJ)(e)):this._load(1,e,t)}async loadImage(e,t){return this._load(2,e,t)}async _load(e,t,n){if(null==this._streamDataRequester)return(await(0,r.A)(t,{responseType:s[e]})).data;const u=await(0,o.Ke)(this._streamDataRequester.request(t,e,n));if(!0===u.ok)return u.value;throw(0,i.QP)(u.error),new l.A("glt-loader-request-error","Request for resource failed: ".concat(u.error))}}const s={2:"image",1:"array-buffer",0:"json",3:void 0}},37040:(e,t,n)=>{n.d(t,{KB:()=>i,Xi:()=>o,pn:()=>u,x3:()=>l});var r=n(81806);class o{constructor(e){this.data=e,this.type="encoded-mesh-texture",this.encoding="image/ktx2"}}function l(e){return"encoded-mesh-texture"===(null===e||void 0===e?void 0:e.type)}async function i(e){const t=new Blob([e]),n=await t.text();return JSON.parse(n)}async function u(e,t){if("image/ktx2"===t)return new o(e);const n=new Blob([e],{type:t});let l=URL.createObjectURL(n);switch(t){case"image/jpeg":l+="#.jpg";break;case"image/png":l+="#.png"}const i=new Image;if((0,r.A)("esri-iPhone"))return new Promise((e,t)=>{const n=()=>{o(),e(i)},r=e=>{o(),t(e)},o=()=>{URL.revokeObjectURL(l),i.removeEventListener("load",n),i.removeEventListener("error",r)};i.addEventListener("load",n),i.addEventListener("error",r),i.src=l});try{i.src=l,await i.decode()}catch(u){console.warn("Failed decoding HTMLImageElement")}return URL.revokeObjectURL(l),i}},52007:(e,t,n)=>{n.d(t,{a:()=>l,f:()=>i,n:()=>o});var r=n(78393);function o(e,t){l(e.typedBuffer,t.typedBuffer,e.typedBufferStride,t.typedBufferStride)}function l(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:2,o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:n;const l=t.length/2;let i=0,u=0;if(!(0,r.iu)(t)||(0,r.dk)(t)){for(let r=0;r<l;++r)e[i]=t[u],e[i+1]=t[u+1],i+=n,u+=o;return}const a=(0,r.a3)(t);if((0,r.JI)(t))for(let r=0;r<l;++r)e[i]=Math.max(t[u]/a,-1),e[i+1]=Math.max(t[u+1]/a,-1),i+=n,u+=o;else for(let r=0;r<l;++r)e[i]=t[u]/a,e[i+1]=t[u+1]/a,i+=n,u+=o}function i(e,t,n,r){var o,l;const i=e.typedBuffer,u=e.typedBufferStride,a=null!==(o=null===r||void 0===r?void 0:r.count)&&void 0!==o?o:e.count;let s=(null!==(l=null===r||void 0===r?void 0:r.dstIndex)&&void 0!==l?l:0)*u;for(let c=0;c<a;++c)i[s]=t,i[s+1]=n,s+=u}Object.freeze(Object.defineProperty({__proto__:null,fill:i,normalizeIntegerBuffer:l,normalizeIntegerBufferView:o},Symbol.toStringTag,{value:"Module"}))}}]);
//# sourceMappingURL=5492.aaeda2d0.chunk.js.map