"use strict";(self.webpackChunkmmsp_land_hl=self.webpackChunkmmsp_land_hl||[]).push([[9118],{4480:(t,e,i)=>{i.d(e,{H:()=>w});var r=i(76931),n=i(94967),s=i(98006),o=i(19555),a=i(84735),c=i(71275),l=i(77555),u=i(33443),h=i(5095),p=i(28736),d=i(97763);class f{static from(t){return"width"in t?this.fromSimpleMeshParams(t):this.fromComplexMeshParams(t)}static fromSimpleMeshParams(t){const e=new f(t.sprite,t.color,t.outlineColor,t.minPixelBuffer,t.placement,t.scaleInfo,t.effects),{type:i,width:n,height:s,angle:o,alignment:a,outlineSize:c,referenceSize:l,sprite:u,overrideOutlineColor:h}=t;return e.rawWidth=(0,r.Lz)(n),e.rawHeight=(0,r.Lz)(s),e.angle=o,e.alignment=a,e.outlineSize=(0,r.Lz)(c),e.referenceSize=(0,r.Lz)(l),e.overrideOutlineColor=h,e.offsetX=(0,r.Lz)(t.offsetX),e.offsetY=(0,r.Lz)(t.offsetY),"simple"!==i||u.sdf||(e.rawWidth=u.width,e.rawHeight=u.height),e._computeSize(t,!1),e}static fromComplexMeshParams(t){var e;const i=new f(t.sprite,t.color,t.outlineColor,t.minPixelBuffer,t.placement,t.scaleInfo,t.effects);let{alignment:n,transforms:s,size:o,scaleX:a,anchorX:c,anchorY:l,angle:u,colorLocked:h,frameHeight:p,widthRatio:x,offsetX:y,offsetY:m,outlineSize:_,referenceSize:v,scaleFactor:g,sizeRatio:b,isAbsoluteAnchorPoint:k,rotateClockwise:w,scaleSymbolsProportionally:S,sprite:T}=t;if(s&&s.infos.length>0){const t=(0,d.zb)(o,u,w,y,m,s);o=t.size,u=t.rotation,y=t.offsetX,m=t.offsetY,w=!1}g&&(o*=g,y*=g,m*=g);const A=a*(T.width/T.height);i.alignment=n,i.rawHeight=(0,r.Lz)(o),i.rawWidth=i.rawHeight*A,i.referenceSize=(0,r.Lz)(v),i.sizeRatio=b,i.sdfDecodeCoeff=(null!==(e=T.sdfDecodeCoeff)&&void 0!==e?e:1)*b,i.angle=u,i.rotateClockwise=w,i.anchorX=c,i.anchorY=l,i.offsetX=(0,r.Lz)(y),i.offsetY=(0,r.Lz)(m),k&&o&&(T.sdf?i.anchorX=c/(o*x):i.anchorX=c/(o*A),i.anchorY=l/o);const P=S&&p?o/p:1;return i.outlineSize=0===_||isNaN(_)?0:(0,r.Lz)(_)*P,i.scaleSymbolsProportionally=S,i.colorLocked=h,i._computeSize(t,!0),i}constructor(t,e,i,r,n,s,o){this.sprite=t,this.color=e,this.outlineColor=i,this.minPixelBuffer=r,this.placement=n,this.scaleInfo=s,this.effects=o,this.rawWidth=0,this.rawHeight=0,this.angle=0,this.outlineSize=0,this.referenceSize=0,this.sizeRatio=1,this.sdfDecodeCoeff=1,this.alignment=0,this.scaleSymbolsProportionally=!1,this.overrideOutlineColor=!1,this.colorLocked=!1,this.anchorX=0,this.anchorY=0,this.computedWidth=0,this.computedHeight=0,this.texXmin=0,this.texYmin=0,this.texXmax=0,this.texYmax=0,this.offsetX=0,this.offsetY=0,this.rotateClockwise=!0}get boundsInfo(){return{size:Math.max(this.computedHeight,this.computedWidth),offsetX:this.offsetX,offsetY:this.offsetY}}_computeSize(t,e){var i;const{sprite:r,hasSizeVV:n}=t,s=!!r.sdf,o=null!==(i=r.sdfPaddingRatio)&&void 0!==i?i:.5,{rawWidth:a,rawHeight:c,sizeRatio:l,outlineSize:u}=this,p=r.rect;let d=a*l,f=c*l,m=0,_=0;if(s){const t=1/(1-o);if(d*=t,f*=t,n)this.computedWidth=d,this.computedHeight=f;else{const t=e&&a>c?d:a,i=c,n=u+2;this.computedWidth=Math.min(t+n,d),this.computedHeight=Math.min(i+n,f);const s=Math.max(r.width,r.height)/Math.max(d,f);m=(this.computedWidth-d)*s,_=(this.computedHeight-f)*s}}else this.computedWidth=d*(p.width/r.width),this.computedHeight=f*(p.height/r.height),m=2*h.hM,_=2*h.hM;const v=p.x+h.hM-m/2,g=p.y+h.hM-_/2,b=v+r.width+m,k=g+r.height+_;this.texXmin=x(v),this.texYmin=x(g),this.texXmax=y(b),this.texYmax=y(k),this.computedWidth*=(this.texXmax-this.texXmin)/(b-v),this.computedHeight*=(this.texYmax-this.texYmin)/(k-g),this.anchorX*=d/this.computedWidth,this.anchorY*=f/this.computedHeight}}function x(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1e-7;const i=Math.ceil(t);return i-t<e?i:Math.floor(t)}function y(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1e-7;const i=Math.floor(t);return t-i<e?i:Math.ceil(t)}var m=i(43282),_=i(12258),v=i(93345);const g=128/Math.PI;function b(t){return function(t,e){return t%=e,Math.abs(t>=0?t:t+e)}(t*g,256)}const k={createComputedParams:t=>f.from(t),optionalAttributes:{zoomRange:{type:v.pe.SHORT,count:2,packPrecisionFactor:h.fq,pack:(t,e)=>{let{scaleInfo:i}=t,{tileInfo:r}=e;return(0,p.My)(i,r)}}},attributes:{pos:{type:v.pe.SHORT,count:2,pack:"position",packPrecisionFactor:10},id:{type:v.pe.UNSIGNED_BYTE,count:3,pack:"id"},bitset:{type:v.pe.UNSIGNED_BYTE,count:1,pack:t=>{let{sprite:e,alignment:i,scaleSymbolsProportionally:r,overrideOutlineColor:n,colorLocked:s}=t,o=0;return e.sdf&&(o|=(0,p.mR)(m.c.bitset.isSDF)),1===i&&(o|=(0,p.mR)(m.c.bitset.isMapAligned)),r&&(o|=(0,p.mR)(m.c.bitset.scaleSymbolsProportionally)),n&&(o|=(0,p.mR)(m.c.bitset.overrideOutlineColor)),s&&(o|=(0,p.mR)(m.c.bitset.colorLocked)),o}},offset:{type:v.pe.HALF_FLOAT,count:2,packAlternating:{count:4,pack:t=>{let{angle:e,computedWidth:i,computedHeight:r,anchorX:a,anchorY:c,offsetX:l,offsetY:u,rotateClockwise:h}=t;const p=function(t,e,i,r){let o=arguments.length>4&&void 0!==arguments[4]&&arguments[4];const a=(0,s.vt)(),c=o?1:-1;return(0,n.D_)(a),(e||i)&&(0,n.Tl)(a,a,[e,-i]),r&&(0,n.e$)(a,a,.017453292519944444*c*-r),a}(0,l,u,-e,h),d=-(.5+a)*i,f=-(.5-c)*r,x=[d,f],y=[d+i,f],m=[d,f+r],_=[d+i,f+r];return(0,o.l0)(x,x,p),(0,o.l0)(y,y,p),(0,o.l0)(m,m,p),(0,o.l0)(_,_,p),[x,y,m,_]}}},textureUV:{type:v.pe.SHORT,count:2,packPrecisionFactor:4,packAlternating:{count:4,pack:t=>{let{texXmax:e,texXmin:i,texYmax:r,texYmin:n}=t;return[[i,n],[e,n],[i,r],[e,r]]}}},color:{type:v.pe.UNSIGNED_BYTE,count:4,normalized:!0,pack:t=>{let{color:e}=t;return(0,p.Jb)(e)}},outlineColor:{type:v.pe.UNSIGNED_BYTE,count:4,normalized:!0,pack:t=>{let{outlineColor:e}=t;return(0,p.Jb)(e)}},sizing:{type:v.pe.UNSIGNED_BYTE,count:4,pack:t=>{let{rawWidth:e,rawHeight:i,outlineSize:r,referenceSize:n}=t;const s=Math.max(e,i);return[(0,p.i8)(s,128),(0,p.i8)(r,128),(0,p.i8)(n,128),0]}},placementAngle:{type:v.pe.UNSIGNED_BYTE,count:1,packTessellation:t=>{let{placementAngle:e}=t;return b(e)}},sdfDecodeCoeff:{type:v.pe.UNSIGNED_SHORT,count:1,packPrecisionFactor:64,pack:t=>{let{sdfDecodeCoeff:e}=t;return e}}}};class w extends _.r{constructor(){super(...arguments),this.vertexSpec=k}getBoundsInfo(){return this.evaluatedMeshParams.boundsInfo}_write(t,e,i){var r;const n=null===(r=this.evaluatedMeshParams.sprite)||void 0===r?void 0:r.textureBinding,s=e.getDisplayId();t.recordStart(this.instanceId,this.attributeLayout,n);const o=this.evaluatedMeshParams.minPixelBuffer,a=Math.max(this.evaluatedMeshParams.computedWidth,o),u=Math.max(this.evaluatedMeshParams.computedHeight,o),h=-this.evaluatedMeshParams.anchorX*this.evaluatedMeshParams.computedWidth,p=this.evaluatedMeshParams.anchorY*this.evaluatedMeshParams.computedHeight,d=this.evaluatedMeshParams.offsetX+h,f=-this.evaluatedMeshParams.offsetY+p;if(null!=this.evaluatedMeshParams.placement){let r=null;if(null!=i){const t=Math.max(this.evaluatedMeshParams.computedWidth,this.evaluatedMeshParams.computedHeight);if(r=(0,c.qc)(i,2*t,!1),null===r)return}this._writePlacedMarkers(t,e,r,a,u)}else if(null!==i&&void 0!==i&&i.nextPath()){i.nextPoint();const e=i.x,r=i.y;t.recordBounds(e+d,r+f,a,u),this._writeQuad(t,s,e,r)}else if("esriGeometryPolygon"===e.geometryType){const i=e.readCentroidForDisplay();if(!i)return;const[r,n]=i.coords;t.recordBounds(r+d,n+f,a,u),this._writeQuad(t,s,r,n)}else if("esriGeometryPoint"===e.geometryType){const i=e.readXForDisplay(),r=e.readYForDisplay();t.recordBounds(i+d,r+f,a,u),this._writeQuad(t,s,i,r)}else{const i=e.readGeometryForDisplay();null===i||void 0===i||i.forEachVertex((e,i)=>{t.recordBounds(e+d,i+f,a,u),Math.abs(e)>l.$u||Math.abs(i)>l.$u||this._writeQuad(t,s,e,i)})}t.recordEnd()}_writePlacedMarkers(t,e,i,n,s){const o=null!==i&&void 0!==i?i:a.z.fromFeatureSetReaderCIM(e);if(!o)return;const c=u.l.getPlacement(o,-1,this.evaluatedMeshParams.placement,(0,r.Lz)(1),t.id);if(!c)return;const h=e.getDisplayId();let p=c.next();const d=this.evaluatedMeshParams.offsetX,f=-this.evaluatedMeshParams.offsetY;for(;null!=p;){const e=p.tx,i=-p.ty;if(Math.abs(e)>l.$u||Math.abs(i)>l.$u){p=c.next();continue}const r=-p.getAngle();t.recordBounds(e+d,i+f,n,s),this._writeQuad(t,h,e,i,r),p=c.next()}}_writeQuad(t,e,i,r,n){const s=t.vertexCount(),o=null==n?null:{placementAngle:n};this._writeVertex(t,e,i,r,o),t.indexWrite(s+0),t.indexWrite(s+1),t.indexWrite(s+2),t.indexWrite(s+1),t.indexWrite(s+3),t.indexWrite(s+2)}}},9410:(t,e,i)=>{i.d(e,{l:()=>a,m:()=>c});var r=i(89379),n=i(5095),s=i(13720),o=i(93345);const a={createComputedParams:t=>t,optionalAttributes:s.v.optionalAttributes,attributes:(0,r.A)((0,r.A)({},s.v.attributes),{},{tlbr:{count:4,type:o.pe.UNSIGNED_SHORT,pack:t=>{let{sprite:e}=t;const{rect:i,width:r,height:s}=e,o=i.x+n.hM,a=i.y+n.hM;return[o,a,o+r,a+s]}},inverseRasterizationScale:{count:1,type:o.pe.BYTE,packPrecisionFactor:16,pack:t=>{let{sprite:e}=t;return 1/e.rasterizationScale}}})};class c extends s.Y{constructor(){super(...arguments),this.vertexSpec=a}_write(t,e,i){var r,n;const s=null!==(r=null===i||void 0===i?void 0:i.asOptimized())&&void 0!==r?r:e.readGeometryForDisplay(),o=this._clip(s);if(!o)return;const a=null===(n=this.evaluatedMeshParams.sprite)||void 0===n?void 0:n.textureBinding;t.recordStart(this.instanceId,this.attributeLayout,a),this._writeGeometry(t,e,o),t.recordEnd()}}},12258:(t,e,i)=>{i.d(e,{r:()=>f});var r=i(84735),n=i(71275),s=i(81377),o=i(99588),a=i(89379),c=(i(81806),i(27534)),l=i(93345);function u(t){switch(t){case l.pe.BYTE:case l.pe.UNSIGNED_BYTE:return 1;case l.pe.SHORT:case l.pe.UNSIGNED_SHORT:case l.pe.HALF_FLOAT:return 2;case l.pe.FLOAT:case l.pe.INT:case l.pe.UNSIGNED_INT:return 4}}class h{static fromVertexSpec(t,e){const{attributes:i,optionalAttributes:r}=t;let n,s,o;const c=[];for(const u in i){if(i[u].otherSource)continue;const t=i[u];"position"===t.pack?n=(0,a.A)((0,a.A)({},t),{},{name:u,offset:0}):"id"===t.pack?s=(0,a.A)((0,a.A)({},t),{},{name:u,offset:4}):"bitset"===u?o=(0,a.A)((0,a.A)({},t),{},{name:u,offset:7}):c.push((0,a.A)((0,a.A)({},t),{},{name:u}))}for(const u in r)if(!0===e[u]){const t=r[u];c.push((0,a.A)((0,a.A)({},t),{},{name:u}))}const l=function(t){const e=[],i=[],r=[];for(const n of t){const t=u(n.type)*n.count;switch(t%2||t%4||4){case 4:e.push(n);continue;case 2:i.push(n);continue;case 1:r.push(n);continue;default:throw new Error("Found unexpected dataType byte count")}}return e.push(...i),e.push(...r),e}(c),p=[];let d=8,f=1;for(const h of l)p.push((0,a.A)((0,a.A)({},h),{},{offset:d})),d+=u(h.type)*h.count,h.packAlternating&&(f=Math.max(h.packAlternating.count,f));const x=Uint32Array.BYTES_PER_ELEMENT,y=d%x;return new h(n,s,o,p,d+(y?x-y:0),f)}constructor(t,e,i,r,n,s){this.position=t,this.id=e,this.bitset=i,this.standardAttributes=r,this.stride=n,this.packVertexCount=s,r.push(i),this._attributes=[t,e,i,...r]}get attributeLayout(){if(!this._attributeLayout){const t=(0,c.hU)(this._attributes),e=this._attributes.map(t=>{var e;return{name:t.name,count:t.count,offset:t.offset,type:t.type,packPrecisionFactor:t.packPrecisionFactor,normalized:null!==(e=t.normalized)&&void 0!==e&&e}});this._attributeLayout={attributes:e,hash:t,stride:this.stride}}return this._attributeLayout}}var p=i(70029);class d{static fromVertexSpec(t,e){const i=h.fromVertexSpec(t,e);return new d(i)}constructor(t){this._spec=t,this._packed=new Uint8Array(this._spec.stride*this._spec.packVertexCount),this._packedU32View=new Uint32Array(this._packed.buffer),this._dataView=new DataView(this._packed.buffer)}get attributeLayout(){return this._spec.attributeLayout}get stride(){return this._spec.stride}writeVertex(t,e,i,r,n,s){for(let a=0;a<this._spec.packVertexCount;a++){const t=a*this._spec.stride;this._packPosition(i,r,t),this._packId(e,t);const c=this._spec.bitset;if(s){if(c.packTessellation){const e=c.packTessellation(s,n,i,r);this._pack(e,c,t)}for(const e of this._spec.standardAttributes){var o;if(null!=e.packTessellation){const o=e.packTessellation(s,n,i,r);this._pack(o,e,t)}else if(null!==(o=e.packAlternating)&&void 0!==o&&o.packTessellation){const t=e.packAlternating.packTessellation(s,n,i,r);for(let i=0;i<this._spec.packVertexCount;i++){const r=t[i];this._pack(r,e,i*this._spec.stride)}}}}}t.vertexWriteRegion(this._packedU32View)}pack(t,e){for(const r of this._spec.standardAttributes){var i;if(r.pack&&"string"!=typeof r.pack){const i=r.pack(t,e);for(let t=0;t<this._spec.packVertexCount;t++)this._pack(i,r,t*this._spec.stride)}else if(null!==(i=r.packAlternating)&&void 0!==i&&i.pack){const i=r.packAlternating.pack(t,e);for(let t=0;t<this._spec.packVertexCount;t++){const e=i[t];this._pack(e,r,t*this._spec.stride)}}}}_packPosition(t,e,i){var r;const{offset:n}=this._spec.position,s=null!==(r=this._spec.position.packPrecisionFactor)&&void 0!==r?r:1,a=(0,o.M9)(t*s,e*s);this._dataView.setUint32(i+n,a,!0)}_packId(t,e){var i;const r=t*(null!==(i=this._spec.id.packPrecisionFactor)&&void 0!==i?i:1),n=4278190080&this._dataView.getUint32(e+this._spec.id.offset,!0);this._dataView.setUint32(e+this._spec.id.offset,r|n,!0)}_pack(t,e,i){(0,p.F)(this._dataView,t,e,i)}}class f{constructor(t,e,i,r){this._instanceId=t,this._evaluator=e,this._enabledOptionalAttributes=i,this._viewParams=r,this._evaluator.evaluator=t=>this.vertexSpec.createComputedParams(t)}get _vertexPack(){if(!this._cachedVertexPack){const t=d.fromVertexSpec(this.vertexSpec,this._enabledOptionalAttributes);this._evaluator.hasDynamicProperties||t.pack(this._evaluator.evaluatedMeshParams,this._viewParams),this._cachedVertexPack=t}return this._cachedVertexPack}get evaluatedMeshParams(){return this._evaluator.evaluatedMeshParams}get hasEffects(){return!!this.evaluatedMeshParams.effects}get effectInfos(){var t;return null===(t=this._evaluator.inputMeshParams.effects)||void 0===t?void 0:t.effectInfos}get instanceId(){return this._instanceId}get attributeLayout(){return this._vertexPack.attributeLayout}get _preventEffectClipping(){return!1}setReferences(t){this._references=t}getBoundsInfo(){return null}getTileInfo(){return this._viewParams.tileInfo}async loadDependencies(){for(const{effect:t}of this.effectInfos||[])await(0,n.ai)(t)}enqueueRequest(t,e,i){this._evaluator.hasDynamicProperties&&this._evaluator.enqueueRequest(t,e,i)}write(t,e,i,r,n){this.ensurePacked(e,i,r);const s=this.evaluatedMeshParams.effects;if(!s||0===s.length)return void this._write(t,i,void 0,n);const o=this.getEffectCursor(t,i,s);if(!o)return;let a;for(;a=o.next();)a.invertY(),this._write(t,i,a,n)}ensurePacked(t,e,i){if(!this._evaluator.hasDynamicProperties)return;const r=this._evaluator.evaluateMeshParams(t,e,i);this._vertexPack.pack(r,this._viewParams)}hasArcadeDependency(t){return this._evaluator.hasArcadeDependency(t)}_writeVertex(t,e,i,r,n){const s=this.evaluatedMeshParams;this._vertexPack.writeVertex(t,e,i,r,s,n)}getEffectCursor(t,e,i){var n;const o=null===(n=e.readGeometryForDisplay())||void 0===n?void 0:n.clone();if(!o)return;const a=r.z.fromOptimizedCIM(o,e.geometryType);a.invertY();const c=t.id||"";return s.V.executeEffects(i,a,c,this._preventEffectClipping)}}},13308:(t,e,i)=>{i.d(e,{KE:()=>d,KI:()=>h,lB:()=>p,oI:()=>u});var r=i(89379),n=i(76931),s=i(55033),o=i(28736),a=i(9410),c=i(90113),l=i(93345);function u(t){const{sprite:e,aspectRatio:i,scaleProportionally:r}=t,s=(0,n.Lz)(t.height),o=s>0?s:e.height;let a=s*i;return a<=0?a=e.width:r&&(a*=e.width/e.height),{width:a,height:o}}function h(t){const{applyRandomOffset:e,sampleAlphaOnly:i}=t;return(0,o.xo)([[c.Fz,e],[c.cn,i]])}const p={createComputedParams:t=>t,optionalAttributes:a.l.optionalAttributes,attributes:(0,r.A)((0,r.A)({},a.l.attributes),{},{bitset:{count:1,type:l.pe.UNSIGNED_BYTE,pack:h},width:{count:1,type:l.pe.HALF_FLOAT,pack:t=>u(t).width},height:{count:1,type:l.pe.HALF_FLOAT,pack:t=>u(t).height},offset:{count:2,type:l.pe.HALF_FLOAT,pack:t=>{let{offsetX:e,offsetY:i}=t;return[(0,n.Lz)(e),-(0,n.Lz)(i)]}},scale:{count:2,type:l.pe.UNSIGNED_BYTE,packPrecisionFactor:16,pack:t=>{let{scaleX:e,scaleY:i}=t;return[e,i]}},angle:{count:1,type:l.pe.UNSIGNED_BYTE,pack:t=>{let{angle:e}=t;return(0,s.wV)(e)}}})};class d extends a.m{constructor(){super(...arguments),this.vertexSpec=p}}},13720:(t,e,i)=>{i.d(e,{Y:()=>c,v:()=>a});var r=i(5095),n=i(98231),s=i(28736),o=i(93345);const a={createComputedParams:t=>t,optionalAttributes:{zoomRange:{type:o.pe.SHORT,count:2,packPrecisionFactor:r.fq,pack:(t,e)=>{let{scaleInfo:i}=t,{tileInfo:r}=e;return(0,s.My)(i,r)}}},attributes:{id:{type:o.pe.UNSIGNED_BYTE,count:3,pack:"id"},bitset:{type:o.pe.UNSIGNED_BYTE,count:1},pos:{type:o.pe.SHORT,count:2,pack:"position",packPrecisionFactor:10},color:{type:o.pe.UNSIGNED_BYTE,count:4,normalized:!0,pack:t=>{let{color:e}=t;return(0,s.Jb)(e)}}}};class c extends n.N{constructor(){super(...arguments),this.vertexSpec=a}createTesselationParams(t){return null}}},26455:(t,e,i)=>{i.d(e,{K:()=>p});var r=i(89379),n=i(76931),s=i(84735),o=i(5095),a=i(28736),c=i(64346),l=i(90113),u=i(93345);const h={createComputedParams:t=>t,optionalAttributes:c.Eq.optionalAttributes,attributes:(0,r.A)((0,r.A)({},c.Eq.attributes),{},{bitset:{type:u.pe.UNSIGNED_BYTE,count:1,pack:t=>{let{shouldSampleAlphaOnly:e,shouldScaleDash:i,isSDF:r}=t;return(0,a.xo)([[l.cn,e],[l.kx,i],[l.b5,r]])}},tlbr:{type:u.pe.UNSIGNED_SHORT,count:4,pack:t=>{let{sprite:e}=t;const{rect:i,width:r,height:n}=e,s=i.x+o.hM,a=i.y+o.hM;return[s,a,s+r,a+n]}},accumulatedDistance:{type:u.pe.UNSIGNED_SHORT,count:1,packTessellation:t=>{let{distance:e}=t;return e}},segmentDirection:{type:u.pe.BYTE,count:2,packPrecisionFactor:16,packTessellation:t=>{let{directionX:e,directionY:i}=t;return[e,i]}},offsetAlongLine:{type:u.pe.HALF_FLOAT,count:1,pack:t=>{let{offsetAlongLine:e}=t;return(0,n.Lz)(e)}},capType:{type:u.pe.UNSIGNED_BYTE,count:1,pack:t=>{let{capType:e}=t;switch(e){case"Butt":case"butt":default:return 0;case"Square":case"square":return 1;case"Round":case"round":return 2}}}})};class p extends c.Bw{constructor(t,e,i,r){super(t,e,i,r),this.vertexSpec=h,this._tessellationOptions.textured=!0}_write(t,e,i){const r=null!==i&&void 0!==i?i:s.z.fromFeatureSetReaderCIM(e);if(!r)return;const{sprite:n}=this.evaluatedMeshParams;this._writeGeometry(t,e,r,null===n||void 0===n?void 0:n.textureBinding)}}},27307:(t,e,i)=>{i.d(e,{i:()=>f});var r=i(5095);function n(t,e){return t.x===e.x&&t.y===e.y}function s(t){if(!t)return;const e=t.length;if(e<=1)return;let i=0;for(let r=1;r<e;r++)n(t[r],t[i])||++i===r||(t[i]=t[r]);t.length=i+1}function o(t,e){return t.x=e.y,t.y=-e.x,t}function a(t,e){return t.x=-e.y,t.y=e.x,t}function c(t,e){return t.x=e.x,t.y=e.y,t}function l(t,e){return t.x=-e.x,t.y=-e.y,t}function u(t){return Math.sqrt(t.x*t.x+t.y*t.y)}function h(t,e){return t.x*e.y-t.y*e.x}function p(t,e){return t.x*e.x+t.y*e.y}function d(t,e,i,r){return t.x=e.x*i+e.y*r,t.y=e.x*r-e.y*i,t}class f{constructor(t,e,i){this._writeVertex=t,this._writeTriangle=e,this._canUseThinTessellation=i,this._prevNormal={x:void 0,y:void 0},this._nextNormal={x:void 0,y:void 0},this._textureNormalLeft={x:0,y:1},this._textureNormalRight={x:0,y:-1},this._textureNormal={x:void 0,y:void 0},this._joinNormal={x:void 0,y:void 0},this._inner={x:void 0,y:void 0},this._outer={x:void 0,y:void 0},this._roundStart={x:void 0,y:void 0},this._roundEnd={x:void 0,y:void 0},this._startBreak={x:void 0,y:void 0},this._endBreak={x:void 0,y:void 0},this._innerPrev={x:void 0,y:void 0},this._innerNext={x:void 0,y:void 0},this._bevelStart={x:void 0,y:void 0},this._bevelEnd={x:void 0,y:void 0},this._bevelMiddle={x:void 0,y:void 0}}tessellate(t,e){let i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:this._canUseThinTessellation;s(t),i&&e.halfWidth<r.Gh&&!e.offset?this._tessellateThin(t,e):this._tessellate(t,e)}_tessellateThin(t,e){if(t.length<2)return;const i=e.wrapDistance||65535;let r=e.initialDistance||0,n=!1,s=t[0].x,o=t[0].y;const a=t.length;for(let c=1;c<a;++c){n&&(n=!1,r=0);let e=t[c].x,a=t[c].y,l=e-s,u=a-o,h=Math.sqrt(l*l+u*u);if(l/=h,u/=h,r+h>i){n=!0;const t=(i-r)/h;h=i-r,e=(1-t)*s+t*e,a=(1-t)*o+t*a,--c}const p=this._writeVertex(s,o,0,0,l,u,u,-l,0,-1,r),d=this._writeVertex(s,o,0,0,l,u,-u,l,0,1,r);r+=h;const f=this._writeVertex(e,a,0,0,l,u,u,-l,0,-1,r),x=this._writeVertex(e,a,0,0,l,u,-u,l,0,1,r);this._writeTriangle(p,d,f),this._writeTriangle(d,f,x),s=e,o=a}}_tessellate(t,e){const i=t[0],r=t[t.length-1],s=n(i,r),f=s?3:2;if(t.length<f)return;const x=e.pixelCoordRatio,y=null!=e.capType?e.capType:0,m=null!=e.joinType?e.joinType:2,_=null!=e.miterLimit?Math.min(e.miterLimit,4):2,v=null!=e.roundLimit?Math.min(e.roundLimit,1.05):1.05,g=null!=e.halfWidth?e.halfWidth:2,b=!!e.textured;let k,w,S,T=null;const A=this._prevNormal,P=this._nextNormal;let M=-1,z=-1;const L=this._joinNormal;let E,N;const F=this._textureNormalLeft,D=this._textureNormalRight,I=this._textureNormal;let Y=-1,B=-1;const O=e.wrapDistance||65535;let R=e.initialDistance||0;const G=this._writeVertex,C=this._writeTriangle,U=(t,e,i,r,n,s)=>{const o=G(w,S,E,N,i,r,t,e,n,s,R);return Y>=0&&B>=0&&o>=0&&C(Y,B,o),Y=B,B=o,o};s&&(k=t[t.length-2],P.x=r.x-k.x,P.y=r.y-k.y,z=u(P),P.x/=z,P.y/=z);let W=!1;for(let n=0;n<t.length;++n){if(W&&(W=!1,R=0),k&&(A.x=-P.x,A.y=-P.y,M=z,R+M>O&&(W=!0)),W){const e=(O-R)/M;M=O-R,k={x:(1-e)*k.x+e*t[n].x,y:(1-e)*k.y+e*t[n].y},--n}else k=t[n];w=k.x,S=k.y;const e=n<=0&&!W,i=n===t.length-1;if(e||(R+=M),T=i?s?t[1]:null:t[n+1],T?(P.x=T.x-w,P.y=T.y-S,z=u(P),P.x/=z,P.y/=z):(P.x=void 0,P.y=void 0),!s){if(e){a(L,P),E=L.x,N=L.y,2===y&&(U(-P.y-P.x,P.x-P.y,P.x,P.y,0,-1),U(P.y-P.x,-P.x-P.y,P.x,P.y,0,1)),1===y&&(U(-P.y-P.x,P.x-P.y,P.x,P.y,-1,-1),U(P.y-P.x,-P.x-P.y,P.x,P.y,-1,1)),1!==y&&0!==y||(U(-P.y,P.x,P.x,P.y,0,-1),U(P.y,-P.x,P.x,P.y,0,1));continue}if(i){o(L,A),E=L.x,N=L.y,1!==y&&0!==y||(U(A.y,-A.x,-A.x,-A.y,0,-1),U(-A.y,A.x,-A.x,-A.y,0,1)),2===y&&(U(A.y-A.x,-A.x-A.y,-A.x,-A.y,0,-1),U(-A.y-A.x,A.x-A.y,-A.x,-A.y,0,1)),1===y&&(U(A.y-A.x,-A.x-A.y,-A.x,-A.y,1,-1),U(-A.y-A.x,A.x-A.y,-A.x,-A.y,1,1));continue}}let r,f,G=-h(A,P);if(Math.abs(G)<.01)p(A,P)>0?(L.x=A.x,L.y=A.y,G=1,r=Number.MAX_VALUE,f=!0):(a(L,P),G=1,r=1,f=!1);else{L.x=(A.x+P.x)/G,L.y=(A.y+P.y)/G,r=u(L);const t=(r-1)*g*x;f=r>4||t>M&&t>z}E=L.x,N=L.y;let C=m;switch(m){case 0:r<1.05&&(C=2);break;case 1:r<v&&(C=2);break;case 2:r>_&&(C=0)}switch(C){case 2:if(U(L.x,L.y,-A.x,-A.y,0,-1),U(-L.x,-L.y,-A.x,-A.y,0,1),i)break;if(b){const t=W?0:R;Y=this._writeVertex(w,S,E,N,P.x,P.y,L.x,L.y,0,-1,t),B=this._writeVertex(w,S,E,N,P.x,P.y,-L.x,-L.y,0,1,t)}break;case 0:{const t=G<0;let e,r,n,s;if(t){const t=Y;Y=B,B=t,e=F,r=D}else e=D,r=F;if(f)n=t?a(this._innerPrev,A):o(this._innerPrev,A),s=t?o(this._innerNext,P):a(this._innerNext,P);else{const e=t?l(this._inner,L):c(this._inner,L);n=e,s=e}const u=t?o(this._bevelStart,A):a(this._bevelStart,A);U(n.x,n.y,-A.x,-A.y,e.x,e.y);const h=U(u.x,u.y,-A.x,-A.y,r.x,r.y);if(i)break;const p=t?a(this._bevelEnd,P):o(this._bevelEnd,P);if(f){const t=this._writeVertex(w,S,E,N,-A.x,-A.y,0,0,0,0,R);Y=this._writeVertex(w,S,E,N,P.x,P.y,s.x,s.y,e.x,e.y,R),B=this._writeVertex(w,S,E,N,P.x,P.y,p.x,p.y,r.x,r.y,R),this._writeTriangle(h,t,B)}else{if(b){const t=this._bevelMiddle;t.x=(u.x+p.x)/2,t.y=(u.y+p.y)/2,d(I,t,-A.x,-A.y),U(t.x,t.y,-A.x,-A.y,I.x,I.y),d(I,t,P.x,P.y),Y=this._writeVertex(w,S,E,N,P.x,P.y,t.x,t.y,I.x,I.y,R),B=this._writeVertex(w,S,E,N,P.x,P.y,s.x,s.y,e.x,e.y,R)}else{const t=Y;Y=B,B=t}U(p.x,p.y,P.x,P.y,r.x,r.y)}if(t){const t=Y;Y=B,B=t}break}case 1:{const t=G<0;let e,n;if(t){const t=Y;Y=B,B=t,e=F,n=D}else e=D,n=F;const s=t?l(this._inner,L):c(this._inner,L);let u,h;f?(u=t?a(this._innerPrev,A):o(this._innerPrev,A),h=t?o(this._innerNext,P):a(this._innerNext,P)):(u=s,h=s);const x=t?o(this._roundStart,A):a(this._roundStart,A),y=t?a(this._roundEnd,P):o(this._roundEnd,P),m=U(u.x,u.y,-A.x,-A.y,e.x,e.y),_=U(x.x,x.y,-A.x,-A.y,n.x,n.y);if(i)break;const v=this._writeVertex(w,S,E,N,-A.x,-A.y,0,0,0,0,R);f||this._writeTriangle(Y,B,v);const g=l(this._outer,s),k=this._writeVertex(w,S,E,N,P.x,P.y,y.x,y.y,n.x,n.y,R);let T,M;const z=r>2;if(z){let e;r!==Number.MAX_VALUE?(g.x/=r,g.y/=r,e=p(A,g),e=(r*(e*e-1)+1)/e):e=-1,T=t?o(this._startBreak,A):a(this._startBreak,A),T.x+=A.x*e,T.y+=A.y*e,M=t?a(this._endBreak,P):o(this._endBreak,P),M.x+=P.x*e,M.y+=P.y*e}d(I,g,-A.x,-A.y);const O=this._writeVertex(w,S,E,N,-A.x,-A.y,g.x,g.y,I.x,I.y,R);d(I,g,P.x,P.y);const C=b?this._writeVertex(w,S,E,N,P.x,P.y,g.x,g.y,I.x,I.y,R):O,W=v,V=b?this._writeVertex(w,S,E,N,P.x,P.y,0,0,0,0,R):v;let H=-1,X=-1;if(z&&(d(I,T,-A.x,-A.y),H=this._writeVertex(w,S,E,N,-A.x,-A.y,T.x,T.y,I.x,I.y,R),d(I,M,P.x,P.y),X=this._writeVertex(w,S,E,N,P.x,P.y,M.x,M.y,I.x,I.y,R)),b?z?(this._writeTriangle(W,_,H),this._writeTriangle(W,H,O),this._writeTriangle(V,C,X),this._writeTriangle(V,X,k)):(this._writeTriangle(W,_,O),this._writeTriangle(V,C,k)):z?(this._writeTriangle(v,_,H),this._writeTriangle(v,H,X),this._writeTriangle(v,X,k)):(this._writeTriangle(v,_,O),this._writeTriangle(v,C,k)),f?(Y=this._writeVertex(w,S,E,N,P.x,P.y,h.x,h.y,e.x,e.y,R),B=k):(Y=b?this._writeVertex(w,S,E,N,P.x,P.y,h.x,h.y,e.x,e.y,R):m,this._writeTriangle(Y,V,k),B=k),t){const t=Y;Y=B,B=t}break}}}}}},28736:(t,e,i)=>{i.d(e,{By:()=>y,Jb:()=>p,My:()=>l,i8:()=>x,mR:()=>u,qE:()=>f,ue:()=>d,xo:()=>h});var r=i(69539),n=i(50076),s=i(76460);const o=()=>s.A.getLogger("esri.views.2d.engine.webgl.shaderGraph.techniques.meshWriterUtils"),a=0,c=100;function l(t,e){return[!(null===t||void 0===t||!t.minScale)&&e.scaleToZoom(t.minScale)||a,!(null===t||void 0===t||!t.maxScale)&&e.scaleToZoom(t.maxScale)||c]}function u(t){return 1<<t}function h(t){let e=0;for(const[i,r]of t)r&&(e|=1<<i);return e}function p(t){let e;if(!t)return[0,0,0,0];if("string"==typeof t){const i=r.A.fromString(t);if(!i)return o().errorOnce(new n.A("mapview:mesh-processing","Unable to parse string into color",{color:t})),[0,0,0,0];e=i.toArray()}else e=t;const[i,s,a,c]=e;return[i*(c/255),s*(c/255),a*(c/255),c]}function d(t){switch(t){case"butt":case"Butt":return 0;case"round":case"Round":return 1;case"square":case"Square":return 2}}function f(t){switch(t){case"bevel":case"Bevel":return 0;case"miter":case"Miter":return 2;case"round":case"Round":return 1}}function x(t,e){return Math.round(Math.min(Math.sqrt(t*e),255))}function y(t,e){return Math.round(t*e)/e}},29300:(t,e,i)=>{i.d(e,{F:()=>d});var r=i(89379),n=i(76931),s=i(84735),o=i(28808),a=i(5095),c=i(28736),l=i(89657),u=i(64346),h=i(93345);const p={createComputedParams:t=>t,optionalAttributes:u.Eq.optionalAttributes,attributes:(0,r.A)((0,r.A)({},u.Eq.attributes),{},{bitset:{type:h.pe.UNSIGNED_BYTE,count:1,pack:t=>{let{gradientMethod:e,gradientSizeUnits:i,gradientType:r}=t;return(0,c.xo)([[l.Q.isAlongLine,"alongline"===e.toLowerCase()],[l.Q.isAbsoluteSize,i===o.O.Absolute],[l.Q.isDiscrete,"discrete"===r.toLowerCase()]])}},tlbr:{type:h.pe.UNSIGNED_SHORT,count:4,pack:t=>{let{sprite:e}=t;const{rect:i,width:r,height:n}=e,s=i.x+a.hM+a.MZ,o=i.y+a.hM;return[s,o,s+r-2*a.MZ,o+n]}},accumulatedDistance:{type:h.pe.HALF_FLOAT,count:1,packTessellation:t=>{let{distance:e,pathLength:i,distanceOffset:r}=t;return(r+e)/i}},gradientSize:{type:h.pe.HALF_FLOAT,count:1,pack:t=>{let{gradientSize:e,gradientSizeUnits:i}=t;return i===o.O.Relative?e/100:(0,n.Lz)(e)}},totalLength:{type:h.pe.HALF_FLOAT,count:1,packTessellation:t=>{let{pathLength:e}=t;return e}},segmentDirection:{type:h.pe.BYTE,count:2,packPrecisionFactor:16,packTessellation:t=>{let{directionX:e,directionY:i}=t;return[e,i]}}})};class d extends u.Bw{get _preventEffectClipping(){return!0}constructor(t,e,i,r){super(t,e,i,r),this.vertexSpec=p,this._tessellationOptions.textured=!0}_write(t,e,i){const r=null!==i&&void 0!==i?i:s.z.fromFeatureSetReaderCIM(e);if(!r)return;const{sprite:n}=this.evaluatedMeshParams;this._writeGeometry(t,e,r,null===n||void 0===n?void 0:n.textureBinding)}}},32252:(t,e,i)=>{i.d(e,{N:()=>h,SM:()=>p,aM:()=>u,ci:()=>d,oo:()=>l,rS:()=>c,vA:()=>f});var r=i(89379),n=i(69539),s=i(95776),o=i(59872),a=i(62484);function c(t){return u(t.map(t=>p(t)).map(t=>(0,o.Qv)(t).simplify()))}function l(t){const e=[];return e.push(t.transform),e.push(t.fromColor),e.push(t.toColor),e.push(t.colorMix),e.push(t.toOpacity),e.push(t.opacityMix),null!==t&&void 0!==t&&t.shift?e.push(null===t||void 0===t?void 0:t.shift):e.push([1,1,1,1]),e}function u(t){const e=[],i=[];let r=0;for(const n of t){const s=[...n.encode(),...a.GA.ret.encode()];e.push([r+t.length,0,0,0]),i.push(...s),r+=s.length}return[...e,...i]}async function h(t,e){const i=t;let n;if("number"==typeof i||"string"==typeof i||"boolean"==typeof i)n=i;else if(Array.isArray(i))n=await Promise.all(i.map(t=>h(t,e)));else if("object"==typeof i)if("valueExpressionInfo"in i){const{valueExpressionInfo:t}=i,{expression:s}=t;n=(0,r.A)((0,r.A)({},i),{},{computed:await e.createComputedField({expression:s})})}else{n={};for(const t in i)n[t]=await h(i[t],e)}return n}function p(t,e,i){const r=t;let o;if("number"==typeof r||"string"==typeof r||"boolean"==typeof r)o=r;else if(Array.isArray(r))o=r.map(t=>p(t,e,i));else if("object"==typeof r)if("type"in r&&null!=r.type&&"Process"===r.type)switch(r.op){case"ArcadeColor":{const t=p(r.value,e,i);f(Array.isArray(t)&&4===t.length),o=[t[0]/255,t[1]/255,t[2]/255,t[3]]}break;case"Transparency":{const t=p(r.value,e,i);f("number"==typeof t),o=1-t/100}break;case"Divide":case"Multiply":case"Add":{const t=p(r.left,e,i);f("number"==typeof t);const n=p(r.right,e,i);switch(f("number"==typeof n),r.op){case"Divide":o=t/n;break;case"Multiply":o=t*n;break;case"Add":o=t+n}}break;case"Random":{const t=p(r.seed,e,i),n=p(r.min,e,i),a=p(r.max,e,i),c=e.getObjectId(),l=(0,s.A)(c||0);o=n+(0,s.J)(l,t)*(a-n)}break;case"Cond":{const t=p(r.condition,e,i),n=p(r.ifTrue,e,i),s=p(r.ifFalse,e,i);o=t?n:s}break;case"MatchWinding":{const t=p(r.sign,e,i);let n=p(r.angle,e,i);if(t>0)for(;n<0;)n+=2*Math.PI;else for(;n>0;)n-=2*Math.PI;o=n}}else if("computed"in r)o=function(t){if(!("computed"in t))return t;let r=t.computed.readWithDefault(e,i,[255*t.defaultValue[0],255*t.defaultValue[1],255*t.defaultValue[2],t.defaultValue[3]]);if("string"==typeof r){const t=n.A.fromString(r);t&&(r=[t.r,t.g,t.b,t.a])}return r}(r);else{o={};for(const t in r)o[t]=p(r[t],e,i)}return o}function*d(t){const e=t;if(Array.isArray(e))for(const i of e)yield*d(i);else if("object"==typeof e)if("type"in e&&null!=e.type&&"Process"===e.type)switch(e.op){case"ArcadeColor":case"Transparency":yield*d(e.value);break;case"Divide":case"Multiply":case"Add":yield*d(e.left),yield*d(e.right);break;case"Random":yield*d(e.seed),yield*d(e.min),yield*d(e.max);break;case"Cond":yield*d(e.condition),yield*d(e.ifTrue),yield*d(e.ifFalse);break;case"MatchWinding":yield*d(e.sign),yield*d(e.angle)}else if("computed"in e)yield e.computed;else for(const i in e)yield*d(e[i])}function f(t){if(!t)throw new Error("Assertion failed.")}},33346:(t,e,i)=>{i.d(e,{O:()=>x});var r=i(89379),n=i(76931),s=i(13308),o=i(28736),a=i(38550),c=i(90113),l=i(93345);const u=s.lB,h=a.e4,p={createComputedParams:t=>t,optionalAttributes:u.optionalAttributes,attributes:(0,r.A)((0,r.A)({},u.attributes),{},{bitset:{type:l.pe.UNSIGNED_BYTE,count:1,pack:t=>(0,s.KI)(t)},aux1:{count:1,type:l.pe.HALF_FLOAT,pack:t=>(0,s.oI)(t).width},aux2:{count:1,type:l.pe.HALF_FLOAT,pack:t=>(0,s.oI)(t).height},aux3:{count:2,type:l.pe.HALF_FLOAT,pack:t=>{let{offsetX:e,offsetY:i}=t;return[(0,n.Lz)(e),(0,n.Lz)(i)]}},aux4:{count:2,type:l.pe.UNSIGNED_BYTE,pack:t=>{let{scaleX:e,scaleY:i}=t;return[e*c.cZ,i*c.cZ]}}})},d={createComputedParams:t=>t,optionalAttributes:u.optionalAttributes,attributes:(0,r.A)((0,r.A)({},u.attributes),{},{color:h.attributes.color,bitset:{type:l.pe.UNSIGNED_BYTE,count:1,pack:t=>(0,o.xo)([[c.Xx,!0]])},aux1:{count:1,type:l.pe.HALF_FLOAT,pack:t=>(0,n.Lz)(.5*t.width)},aux2:{count:1,type:l.pe.HALF_FLOAT,pack:t=>(0,n.Lz)(.5*t.referenceWidth)},aux3:{count:2,type:l.pe.HALF_FLOAT,packTessellation:t=>{let{extrusionOffsetX:e,extrusionOffsetY:i}=t;return[e,i]}},aux4:{count:2,type:l.pe.UNSIGNED_BYTE,packTessellation:t=>{let{normalX:e,normalY:i}=t;return[e*c.cZ+c.v9,i*c.cZ+c.v9]}}})};class f extends a.eY{constructor(){super(...arguments),this.vertexSpec=d}}class x extends a.w0{constructor(){super(...arguments),this.vertexSpec=p}_createOutlineWriter(t,e,i,r){return new f(t,e,i,r)}write(t,e,i,r,n){var s;this.ensurePacked(e,i,r);const o=null===(s=this.evaluatedMeshParams.sprite)||void 0===s?void 0:s.textureBinding;t.recordStart(this.instanceId,this.attributeLayout,o),this._write(t,i),t.recordEnd()}ensurePacked(t,e,i){super.ensurePacked(t,e,i),this._lineMeshWriter.ensurePacked(t,e,i)}enqueueRequest(t,e,i){super.enqueueRequest(t,e,i),this._lineMeshWriter.enqueueRequest(t,e,i)}async loadDependencies(){await Promise.all([super.loadDependencies(),this._lineMeshWriter.loadDependencies()])}}},33443:(t,e,i)=>{i.d(e,{l:()=>n});var r=i(47904);class n{static getPlacement(t,e,i,n,s){const o=(0,r.c)(i);return o?(-1===e&&t.invertY(),o.execute(t,i,n,s)):null}}},35797:(t,e,i)=>{i.d(e,{uS:()=>U,FE:()=>C,lO:()=>R,XZ:()=>G});var r=i(89379),n=i(51703),s=i(62032),o=i(1484),a=i(5095);i(81806);function c(t,e,i,r,n,s,o){F=0;const a=(r-i)*s,c=n&&n.length,u=c?(n[0]-i)*s:a;let p,d,f,x,y,_=l(e,i,r,0,u,s,!0);if(_&&_.next!==_.prev){if(c&&(_=m(e,i,r,n,_,s)),a>80*s){p=f=e[0+i*s],d=x=e[1+i*s];for(let t=s;t<u;t+=s){const r=e[t+i*s],n=e[t+1+i*s];p=Math.min(p,r),d=Math.min(d,n),f=Math.max(f,r),x=Math.max(x,n)}y=Math.max(f-p,x-d),y=0!==y?1/y:0}h(_,t,s,p,d,y,o,0)}}function l(t,e,i,r,n,s,o){let a;if(o===function(t,e,i,r,n,s){let o=0;for(let a=r,c=n-s;a<n;a+=s)o+=(t[c+e*s]-t[a+e*s])*(t[a+1+e*s]+t[c+1+e*s]),c=a;return o}(t,e,0,r,n,s)>0)for(let c=r;c<n;c+=s)a=f(c+e*s,t[c+e*s],t[c+1+e*s],a);else for(let c=n-s;c>=r;c-=s)a=f(c+e*s,t[c+e*s],t[c+1+e*s],a);return a&&T(a,a.next)&&(x(a),a=a.next),a}function u(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:t;if(!t)return t;let i,r=t;do{if(i=!1,r.steiner||!T(r,r.next)&&0!==g(r.prev,r,r.next))r=r.next;else{if(x(r),r=e=r.prev,r===r.next)break;i=!0}}while(i||r!==e);return e}function h(t,e,i,r,n,s,o,a){if(!t)return;!a&&s&&(t=v(t,r,n,s));let c=t;for(;t.prev!==t.next;){const l=t.prev,f=t.next;if(s?d(t,r,n,s):p(t))e.push(l.index/i+o),e.push(t.index/i+o),e.push(f.index/i+o),x(t),t=f.next,c=f.next;else if((t=f)===c){a?1===a?h(t=P(t,e,i,o),e,i,r,n,s,o,2):2===a&&M(t,e,i,r,n,s,o):h(u(t),e,i,r,n,s,o,1);break}}}function p(t){const e=t.prev,i=t,r=t.next;if(g(e,i,r)>=0)return!1;let n=t.next.next;const s=n;let o=0;for(;n!==t.prev&&(0===o||n!==s);){if(o++,k(e.x,e.y,i.x,i.y,r.x,r.y,n.x,n.y)&&g(n.prev,n,n.next)>=0)return!1;n=n.next}return!0}function d(t,e,i,r){const n=t.prev,s=t,o=t.next;if(g(n,s,o)>=0)return!1;const a=n.x<s.x?n.x<o.x?n.x:o.x:s.x<o.x?s.x:o.x,c=n.y<s.y?n.y<o.y?n.y:o.y:s.y<o.y?s.y:o.y,l=n.x>s.x?n.x>o.x?n.x:o.x:s.x>o.x?s.x:o.x,u=n.y>s.y?n.y>o.y?n.y:o.y:s.y>o.y?s.y:o.y,h=S(a,c,e,i,r),p=S(l,u,e,i,r);let d=t.prevZ,f=t.nextZ;for(;d&&d.z>=h&&f&&f.z<=p;){if(d!==t.prev&&d!==t.next&&k(n.x,n.y,s.x,s.y,o.x,o.y,d.x,d.y)&&g(d.prev,d,d.next)>=0)return!1;if(d=d.prevZ,f!==t.prev&&f!==t.next&&k(n.x,n.y,s.x,s.y,o.x,o.y,f.x,f.y)&&g(f.prev,f,f.next)>=0)return!1;f=f.nextZ}for(;d&&d.z>=h;){if(d!==t.prev&&d!==t.next&&k(n.x,n.y,s.x,s.y,o.x,o.y,d.x,d.y)&&g(d.prev,d,d.next)>=0)return!1;d=d.prevZ}for(;f&&f.z<=p;){if(f!==t.prev&&f!==t.next&&k(n.x,n.y,s.x,s.y,o.x,o.y,f.x,f.y)&&g(f.prev,f,f.next)>=0)return!1;f=f.nextZ}return!0}function f(t,e,i,r){const n=E.create(t,e,i);return r?(n.next=r.next,n.prev=r,r.next.prev=n,r.next=n):(n.prev=n,n.next=n),n}function x(t){t.next.prev=t.prev,t.prev.next=t.next,t.prevZ&&(t.prevZ.nextZ=t.nextZ),t.nextZ&&(t.nextZ.prevZ=t.prevZ)}function y(t){let e=t,i=t;do{(e.x<i.x||e.x===i.x&&e.y<i.y)&&(i=e),e=e.next}while(e!==t);return i}function m(t,e,i,r,n,s){const o=new Array;for(let a=0,c=r.length;a<c;a++){const n=l(t,e,0,r[a]*s,a<c-1?r[a+1]*s:i*s,s,!1);n===n.next&&(n.steiner=!0),o.push(y(n))}o.sort(A);for(const a of o)n=_(a,n);return n}function _(t,e){const i=function(t,e){let i=e;const r=t.x,n=t.y;let s,o=-1/0;do{if(n<=i.y&&n>=i.next.y&&i.next.y!==i.y){const t=i.x+(n-i.y)*(i.next.x-i.x)/(i.next.y-i.y);if(t<=r&&t>o){if(o=t,t===r){if(n===i.y)return i;if(n===i.next.y)return i.next}s=i.x<i.next.x?i:i.next}}i=i.next}while(i!==e);if(!s)return null;if(r===o)return s.prev;const a=s,c=s.x,l=s.y;let u,h=1/0;for(i=s.next;i!==a;)r>=i.x&&i.x>=c&&r!==i.x&&k(n<l?r:o,n,c,l,n<l?o:r,n,i.x,i.y)&&(u=Math.abs(n-i.y)/(r-i.x),(u<h||u===h&&i.x>s.x)&&w(i,t)&&(s=i,h=u)),i=i.next;return s}(t,e);if(!i)return e;const r=L(i,t);return u(r,r.next),u(i,i.next)}function v(t,e,i,r){let n;for(;n!==t;n=n.next){if(n=n||t,null===n.z&&(n.z=S(n.x,n.y,e,i,r)),n.prev.next!==n||n.next.prev!==n)return n.prev.next=n,n.next.prev=n,v(t,e,i,r);n.prevZ=n.prev,n.nextZ=n.next}return t.prevZ.nextZ=null,t.prevZ=null,function(t){let e,i=1;for(;;){let r,n=t;t=null,e=null;let s=0;for(;n;){s++,r=n;let o=0;for(;o<i&&r;o++)r=r.nextZ;let a=i;for(;o>0||a>0&&r;){let i;0===o?(i=r,r=r.nextZ,a--):0!==a&&r?n.z<=r.z?(i=n,n=n.nextZ,o--):(i=r,r=r.nextZ,a--):(i=n,n=n.nextZ,o--),e?e.nextZ=i:t=i,i.prevZ=e,e=i}n=r}if(e.nextZ=null,i*=2,s<2)return t}}(t)}function g(t,e,i){return(e.y-t.y)*(i.x-e.x)-(e.x-t.x)*(i.y-e.y)}function b(t,e,i,r){return!!(T(t,e)&&T(i,r)||T(t,r)&&T(i,e))||g(t,e,i)>0!=g(t,e,r)>0&&g(i,r,t)>0!=g(i,r,e)>0}function k(t,e,i,r,n,s,o,a){return(n-o)*(e-a)-(t-o)*(s-a)>=0&&(t-o)*(r-a)-(i-o)*(e-a)>=0&&(i-o)*(s-a)-(n-o)*(r-a)>=0}function w(t,e){return g(t.prev,t,t.next)<0?g(t,e,t.next)>=0&&g(t,t.prev,e)>=0:g(t,e,t.prev)<0||g(t,t.next,e)<0}function S(t,e,i,r,n){return(t=1431655765&((t=858993459&((t=252645135&((t=16711935&((t=32767*(t-i)*n)|t<<8))|t<<4))|t<<2))|t<<1))|(e=1431655765&((e=858993459&((e=252645135&((e=16711935&((e=32767*(e-r)*n)|e<<8))|e<<4))|e<<2))|e<<1))<<1}function T(t,e){return t.x===e.x&&t.y===e.y}function A(t,e){return t.x-e.x}function P(t,e,i,r){let n=t;do{const s=n.prev,o=n.next.next;!T(s,o)&&b(s,n,n.next,o)&&w(s,o)&&w(o,s)&&(e.push(s.index/i+r),e.push(n.index/i+r),e.push(o.index/i+r),x(n),x(n.next),n=t=o),n=n.next}while(n!==t);return n}function M(t,e,i,r,n,s,o){let a=t;do{let t=a.next.next;for(;t!==a.prev;){if(a.index!==t.index&&z(a,t)){let c=L(a,t);return a=u(a,a.next),c=u(c,c.next),h(a,e,i,r,n,s,o,0),void h(c,e,i,r,n,s,o,0)}t=t.next}a=a.next}while(a!==t)}function z(t,e){return t.next.index!==e.index&&t.prev.index!==e.index&&!function(t,e){let i=t;do{if(i.index!==t.index&&i.next.index!==t.index&&i.index!==e.index&&i.next.index!==e.index&&b(i,i.next,t,e))return!0;i=i.next}while(i!==t);return!1}(t,e)&&w(t,e)&&w(e,t)&&function(t,e){let i=t,r=!1;const n=(t.x+e.x)/2,s=(t.y+e.y)/2;do{i.y>s!=i.next.y>s&&i.next.y!==i.y&&n<(i.next.x-i.x)*(s-i.y)/(i.next.y-i.y)+i.x&&(r=!r),i=i.next}while(i!==t);return r}(t,e)}function L(t,e){const i=E.create(t.index,t.x,t.y),r=E.create(e.index,e.x,e.y),n=t.next,s=e.prev;return t.next=e,e.prev=t,i.next=n,n.prev=i,r.next=i,i.prev=r,s.next=r,r.prev=s,r}class E{constructor(){this.index=0,this.x=0,this.y=0,this.prev=null,this.next=null,this.z=null,this.prevZ=null,this.nextZ=null,this.steiner=!1}static create(t,e,i){const r=F<N.length?N[F++]:new E;return r.index=t,r.x=e,r.y=i,r.prev=null,r.next=null,r.z=null,r.prevZ=null,r.nextZ=null,r.steiner=!1,r}}const N=[];let F=0;for(let W=0;W<8096;W++)N.push(new E);const D=1e-5,I=new s.O3(0,0,0,1,0),Y=new s.O3(0,0,0,1,0);function B(t,e,i){let r=0;for(let n=1;n<i;n++){const i=t[2*(e+n-1)],s=t[2*(e+n-1)+1];r+=(t[2*(e+n)]-i)*(t[2*(e+n)+1]+s)}return r}function O(t,e,i,r,n){let s=0;for(let o=i;o<r;o+=3){const i=2*(t[o]-n),r=2*(t[o+1]-n),a=2*(t[o+2]-n);s+=Math.abs((e[i]-e[a])*(e[r+1]-e[i+1])-(e[i]-e[r])*(e[a+1]-e[i+1]))}return s}function R(t,e){const{coords:i,lengths:r}=e,n=t;let s=0;for(let o=0;o<r.length;){let t=o,e=r[o],a=B(i,s,e);const l=[];for(;++t<r.length;){const n=r[t],o=B(i,s+e,n);if(!(o>0))break;a+=o,l.push(s+e),e+=n}const u=n.length;c(n,i,s,s+e,l,2,0);const h=O(n,i,u,n.length,0),p=Math.abs(a);if(Math.abs((h-p)/Math.max(1e-7,p))>D)return n.length=0,!1;o=t,s+=e}return!0}function G(t){const{coords:e,lengths:i}=t,{buffer:r}=(0,n.l)(e,i);return r}function C(t,e){if(null==t)return null;if(!function(t,e,i){let r=0;for(let n=0;n<t.lengths.length;n++){const s=t.lengths[n];for(let n=0;n<s;n++){const s=t.coords[2*(n+r)],o=t.coords[2*(n+r)+1];if(s<e||s>i||o<e||o>i)return!0}r+=s}return!1}(t,-128,a.CQ+128))return t;I.setPixelMargin(e),I.reset(3);let i=0;for(let o=0;o<t.lengths.length;o++){const e=t.lengths[o];let r=t.coords[2*(0+i)],n=t.coords[2*(0+i)+1];I.moveTo(r,n);for(let s=1;s<e;s++)r=t.coords[2*(s+i)],n=t.coords[2*(s+i)+1],I.lineTo(r,n);I.close(),i+=e}const r=I.result(!1);if(!r)return null;const n=[],s=[];for(const o of r){let t=0;for(const e of o)s.push(e.x),s.push(e.y),t++;n.push(t)}return new o.A(n,s)}function U(t,e){Y.setPixelMargin(e);const i=Y,n=-e,s=a.CQ+e;let o=[],c=!1;if(!t.nextPath())return null;let l=t.pathLength(),u=!0;for(;u;){t.seekPathStart();const e=[];if(!t.pathSize)return null;i.reset(2),t.nextPoint();let a=t.x,h=t.y;if(c)i.moveTo(a,h);else{if(a<n||a>s||h<n||h>s){c=!0;continue}e.push({x:a,y:h})}let p=!1;for(;t.nextPoint();)if(a=t.x,h=t.y,c)i.lineTo(a,h);else{if(a<n||a>s||h<n||h>s){p=!0;break}e.push({x:a,y:h})}if(p)c=!0;else{if(c){const t=i.resultWithStarts();if(t)for(const e of t)o.push((0,r.A)((0,r.A)({},e),{},{pathLength:l}))}else o.push({line:e,start:0,pathLength:l});u=t.nextPath(),l=u?t.pathLength():0,c=!1}}return o=o.filter(t=>t.line.length>1),0===o.length?null:o}I.setExtent(a.CQ),Y.setExtent(a.CQ)},35870:(t,e,i)=>{i.d(e,{GE:()=>k,Q5:()=>m,Sy:()=>h,Tx:()=>b,YE:()=>d,Z6:()=>l,bU:()=>p,cY:()=>v,g7:()=>S,id:()=>y,jo:()=>c,k3:()=>u,n1:()=>_,qb:()=>x,uv:()=>g,ve:()=>w,zK:()=>f});var r=i(5095),n=i(32252),s=i(83936),o=i(28736),a=i(93345);const c={type:a.pe.SHORT,count:2,packPrecisionFactor:r.fq,pack:(t,e)=>{let{scaleInfo:i}=t,{tileInfo:r}=e;return(0,o.My)(i,r)}},l={type:a.pe.FLOAT,count:4,packPrecisionFactor:1,packTessellation:t=>{let{value1Position2Value2:e}=t;return(0,n.vA)(e),e}},u={type:a.pe.FLOAT,count:4,packPrecisionFactor:1,packTessellation:()=>[0,0,0,1]},h={type:a.pe.FLOAT,count:1,packPrecisionFactor:1,pack:()=>0},p={type:a.pe.FLOAT,count:1,packPrecisionFactor:1,packTessellation:t=>{let{lineLength:e}=t;return e}},d={type:a.pe.UNSIGNED_SHORT,count:1,packTessellation:t=>{let{distance:e}=t;return e}},f={type:a.pe.BYTE,count:2,packPrecisionFactor:16,packTessellation:t=>{let{directionX:e,directionY:i}=t;return[e,i]}},x={type:a.pe.FLOAT,count:2,packPrecisionFactor:16,packTessellation:t=>{let{normalX:e,normalY:i}=t;return[e,i]}},y={type:a.pe.UNSIGNED_BYTE,count:3,pack:"id"},m={type:a.pe.UNSIGNED_BYTE,count:1,pack:s.U},_={type:a.pe.SHORT,count:2,pack:"position",packPrecisionFactor:1},v={marker:{type:a.pe.FLOAT,count:2,packAlternating:{count:4,pack:t=>{let{texelDimensions:e}=t;return[[-.5*e[0],-.5*e[1]],[.5*e[0],-.5*e[1]],[-.5*e[0],.5*e[1]],[.5*e[0],.5*e[1]]]}}},line:{type:a.pe.FLOAT,count:2,packTessellation:(t,e)=>{let{extrusionOffsetX:i,extrusionOffsetY:r}=t,{baseSize:n}=e;return[i*n/2,r*n/2]}},fill:{type:a.pe.FLOAT,count:2,packTessellation:()=>[0,0]}},g={marker:{type:a.pe.SHORT,count:2,packPrecisionFactor:1,packAlternating:{count:4,packTessellation:t=>{let{texXmax:e,texXmin:i,texYmax:r,texYmin:n}=t;return[[i,n],[e,n],[i,r],[e,r]]}}}},b={type:a.pe.UNSIGNED_SHORT,count:4,pack:t=>{let{sprite:e}=t;const{rect:i,width:n,height:s}=e,o=i.x+r.hM,a=i.y+r.hM;return[o+1,a+1,o+n-1,a+s-1]}},k={type:a.pe.UNSIGNED_SHORT,count:4,packPrecisionFactor:4,pack:t=>{let{animations:e,baseSize:i,referenceSize:r}=t;return[e.dataColumn,e.dataRow,i,r]}},w={type:a.pe.UNSIGNED_SHORT,count:4,packPrecisionFactor:8,pack:t=>{let{strokeWidth:e,pixelDimensions:i,baseSize:r,sprite:n,sizeRatio:s}=t;const o=Math.max(r*n.width/n.height,r),a=n.sdfDecodeCoeff*o*s;return[i[0],i[1],e,a]}},S={type:a.pe.BYTE,count:1,packTessellation:t=>{let{angle:e}=t;return e}}},38550:(t,e,i)=>{i.d(e,{Lm:()=>p,e4:()=>d,eY:()=>f,w0:()=>x});var r=i(89379),n=i(84735),s=i(35797),o=i(13720),a=i(28736),c=i(64346),l=i(27534),u=i(90113),h=i(93345);const p={createComputedParams:t=>t,optionalAttributes:c.Eq.optionalAttributes,attributes:(0,r.A)((0,r.A)({},c.Eq.attributes),{},{bitset:{type:h.pe.UNSIGNED_BYTE,count:1,pack:t=>0},color:{type:h.pe.UNSIGNED_BYTE,count:4,normalized:!0,pack:t=>{let{color:e}=t;return(0,a.Jb)(e)}}})},d={createComputedParams:t=>t,optionalAttributes:c.Eq.optionalAttributes,attributes:(0,r.A)((0,r.A)({},c.Eq.attributes),{},{bitset:{type:h.pe.UNSIGNED_BYTE,count:1,pack:t=>(0,a.xo)([[u.Xx,!0],[u.bB,t.outlineUsesColorVV]])},color:{type:h.pe.UNSIGNED_BYTE,count:4,normalized:!0,pack:t=>{let{outlineColor:e}=t;return(0,a.Jb)(e)}}})};class f extends c.Bw{constructor(){super(...arguments),this.vertexSpec=d}}class x extends o.Y{constructor(t,e,i,r){super(t,e,i,r),this.vertexSpec=p,this._lineMeshWriter=this._createOutlineWriter(t,e,i,r)}_createOutlineWriter(t,e,i,r){return new f(t,e,i,r)}_write(t,e){const i=this.evaluatedMeshParams.effects,r=this.evaluatedMeshParams.outlineEffects;if(null!==i&&void 0!==i&&i.length||null!==r&&void 0!==r&&r.length){if(null!==i&&void 0!==i&&i.length){const r=this.getEffectCursor(t,e,i);if(r){let i;for(;i=null===r||void 0===r?void 0:r.next();)i.invertY(),this._writeFill(t,e,i)}}else this._writeFill(t,e);if(null!==r&&void 0!==r&&r.length){const i=this.getEffectCursor(t,e,r);if(i){let r;for(;r=null===i||void 0===i?void 0:i.next();)r.invertY(),this._writeOutline(t,e,r)}}else this._writeOutline(t,e)}else this._writeSimpleOutlineFill(t,e)}_writeSimpleOutlineFill(t,e){const i=e.readGeometryForDisplay(),r=this._clip(i);r&&(this._writeGeometry(t,e,r),this._lineMeshWriter.writeLineVertices(t,n.z.fromOptimizedCIM(r,"esriGeometryPolyline"),e))}_writeFill(t,e,i){var r;const n=null!==(r=null===i||void 0===i?void 0:i.asOptimized())&&void 0!==r?r:e.readGeometryForDisplay(),s=this._clip(n);s&&this._writeGeometry(t,e,s)}_writeOutline(t,e,i){var r;const s=null!==(r=null===i||void 0===i?void 0:i.asOptimized())&&void 0!==r?r:e.readGeometryForDisplay(),o=this._clip(s);o&&this._lineMeshWriter.writeLineVertices(t,n.z.fromOptimizedCIM(o,"esriGeometryPolyline"),e)}_clip(t){return t?(0,s.FE)(t,(0,l.Z0)(this.evaluatedMeshParams)):null}get effectInfos(){var t,e,i,r;return[...null!==(t=null===(e=this._evaluator.inputMeshParams.effects)||void 0===e?void 0:e.effectInfos)&&void 0!==t?t:[],...null!==(i=null===(r=this._evaluator.inputMeshParams.outlineEffects)||void 0===r?void 0:r.effectInfos)&&void 0!==i?i:[]]}write(t,e,i,r,n){this.ensurePacked(e,i,r),t.recordStart(this.instanceId,this.attributeLayout),this._write(t,i),t.recordEnd()}ensurePacked(t,e,i){super.ensurePacked(t,e,i),this._lineMeshWriter.ensurePacked(t,e,i)}enqueueRequest(t,e,i){super.enqueueRequest(t,e,i),this._lineMeshWriter.enqueueRequest(t,e,i)}async loadDependencies(){await Promise.all([super.loadDependencies(),this._lineMeshWriter.loadDependencies()])}get hasEffects(){return!!this.evaluatedMeshParams.outlineEffects}}},41406:(t,e,i)=>{i.d(e,{v:()=>c});var r=i(76931),n=i(28736),s=i(12258),o=i(93345);const a={createComputedParams:t=>t,optionalAttributes:{},attributes:{pos:{type:o.pe.SHORT,count:2,packPrecisionFactor:10,pack:"position"},id:{type:o.pe.UNSIGNED_BYTE,count:3,pack:"id"},bitset:{type:o.pe.UNSIGNED_BYTE,count:1,pack:t=>0},offset:{type:o.pe.SHORT,count:2,packPrecisionFactor:16,packAlternating:{count:4,pack:t=>{let{size:e}=t;const i=(0,r.Lz)(e),n=-i/2,s=-i/2;return[[n,s],[n+i,s],[n,s+i],[n+i,s+i]]}}},texCoords:{type:o.pe.SHORT,count:2,packPrecisionFactor:4,packAlternating:{count:4,pack:()=>[[0,1],[1,1],[0,0],[1,0]]}},size:{type:o.pe.UNSIGNED_BYTE,count:2,pack:t=>{let{size:e}=t;return[e,e]}},referenceSize:{type:o.pe.UNSIGNED_BYTE,count:1,pack:t=>{let{size:e}=t;return(0,r.Lz)(e)}},zoomRange:{type:o.pe.UNSIGNED_BYTE,count:2,pack:(t,e)=>{let{scaleInfo:i}=t,{tileInfo:r}=e;return(0,n.My)(i,r)}}}};class c extends s.r{constructor(){super(...arguments),this.vertexSpec=a}_write(t,e){const i=e.getDisplayId(),n=this.evaluatedMeshParams.minPixelBuffer,s=Math.max((0,r.Lz)(this.evaluatedMeshParams.size),n);let o,a;if("esriGeometryPoint"===e.geometryType)o=e.readXForDisplay(),a=e.readYForDisplay();else{const t=e.readCentroidForDisplay();if(!t)return;o=null===t||void 0===t?void 0:t.coords[0],a=null===t||void 0===t?void 0:t.coords[1]}t.recordStart(this.instanceId,this.attributeLayout),t.recordBounds(o,a,s,s);const c=t.vertexCount();this._writeVertex(t,i,o,a),t.indexWrite(c+0),t.indexWrite(c+1),t.indexWrite(c+2),t.indexWrite(c+1),t.indexWrite(c+3),t.indexWrite(c+2),t.recordEnd()}}},51703:(t,e,i)=>{i.d(e,{F:()=>c,l:()=>l});var r=i(28899),n=i(81806);const s=128e3;let o=null,a=null;async function c(){return o||(o=async function(){const t=(0,n.A)("esri-csp-restrictions")?await i.e(7879).then(i.bind(i,27879)).then(t=>t.l):await i.e(6821).then(i.bind(i,56821)).then(t=>t.l);a=await t.default({locateFile:t=>(0,r.s)("esri/core/libs/libtess/".concat(t))})}()),o}function l(t,e){const i=Math.max(t.length,s);return a.triangulate(t,e,i)}},57156:(t,e,i)=>{i.d(e,{Q:()=>l});var r=i(89379),n=i(38550),s=i(9410);const o={optionalAttributes:s.l.optionalAttributes,createComputedParams:t=>t,attributes:(0,r.A)((0,r.A)({},s.l.attributes),n.Lm.attributes)},a={optionalAttributes:s.l.optionalAttributes,createComputedParams:t=>t,attributes:(0,r.A)((0,r.A)({},s.l.attributes),n.e4.attributes)};class c extends n.eY{constructor(){super(...arguments),this.vertexSpec=a}}class l extends n.w0{constructor(){super(...arguments),this.vertexSpec=o}_createOutlineWriter(t,e,i,r){return new c(t,e,i,r)}write(t,e,i,r,n){var s;this.ensurePacked(e,i,r);const o=null===(s=this.evaluatedMeshParams.sprite)||void 0===s?void 0:s.textureBinding;t.recordStart(this.instanceId,this.attributeLayout,o),this._write(t,i),t.recordEnd()}ensurePacked(t,e,i){super.ensurePacked(t,e,i),this._lineMeshWriter.ensurePacked(t,e,i)}enqueueRequest(t,e,i){super.enqueueRequest(t,e,i),this._lineMeshWriter.enqueueRequest(t,e,i)}async loadDependencies(){await Promise.all([super.loadDependencies(),this._lineMeshWriter.loadDependencies()])}}},59872:(t,e,i)=>{i.d(e,{Qv:()=>n});var r=i(62484);function n(t){return t instanceof s?t:"object"==typeof t&&"type"in t?u[t.type].hydrate(t):new o(t)}class s{constructor(t){this.inputs=t}encode(){const t=[];for(const e of this.inputs)t.push(...e.encode());return t.push(...this.instructions),t}}class o extends s{constructor(t){super([]),this.value=t}simplify(){return this}get instructions(){if(Array.isArray(this.value)){const[t,e,i,n]=this.value;return null!=n?r.GA.vector4.encode([t,e||0,i||0,n]):r.GA.vector3.encode([t,e||0,i||0])}return r.GA.scalar.encode(this.value)}}class a extends s{constructor(t,e){super([e]),this._config=t,this._parent=e}static hydrate(t){return new a(t,n(t.parent))}simplify(){if(this._config.relativeTranslation||this._config.absoluteScale)return this;const t=this._parent.simplify();if(!(t instanceof o))return this;const[e,i,r,n]=t.value,s=this._config.translation.from[0],c=this._config.translation.from[1],l=this._config.rotation.from,u=this._config.scale.from;if(s===this._config.translation.to[0]&&c===this._config.translation.to[1]&&l===this._config.rotation.to&&u===this._config.scale.to){const t=r+l,a=n*u,h=Math.sin(r),p=Math.cos(r);return new o([p*n*s-h*n*c+e,h*n*s+p*n*c+i,t,a])}return new a(this._config,t)}get instructions(){return r.GA.animatedTransform.encode(this._config)}}class c extends s{constructor(t,e){super([e]),this._config=t,this._parent=e}static hydrate(t){return new c(t,n(t.parent))}simplify(){const t=this._parent.simplify();if(!(t instanceof o))return this;const[e,i,r,n]=t.value,s=this._config.color.from[0],a=this._config.color.from[1],l=this._config.color.from[2];let u=this._config.color.from[3];const h=this._config.opacity.from;return s===this._config.color.to[0]&&a===this._config.color.to[1]&&l===this._config.color.to[2]&&u===this._config.color.to[3]&&h===this._config.opacity.to?(u*=h,new o([e*s,i*a,r*l,n*u])):new c(this._config,t)}get instructions(){return r.GA.animatedColor.encode(this._config)}}class l extends s{constructor(t,e){super([e]),this._config=t,this._parent=e}static hydrate(t){return new l(t,n(t.parent))}simplify(){const t=this._parent.simplify();return t instanceof o?new l(this._config,t):this}get instructions(){return r.GA.animatedShift.encode(this._config)}}const u={AnimatedTransform:a,AnimatedColor:c,AnimatedShift:l}},64346:(t,e,i)=>{i.d(e,{Bw:()=>y,Eq:()=>d,sp:()=>p});var r=i(76931),n=i(84735),s=i(5095),o=i(27307),a=i(35797),c=i(28736),l=i(12258),u=i(27534),h=i(93345);class p{constructor(){this.extrusionOffsetX=0,this.extrusionOffsetY=0,this.normalX=0,this.normalY=0,this.directionX=0,this.directionY=0,this.distance=0,this.pathLength=0,this.distanceOffset=0,this.lineLength=0}}const d={createComputedParams:t=>t,optionalAttributes:{zoomRange:{type:h.pe.SHORT,count:2,packPrecisionFactor:s.fq,pack:(t,e)=>{let{scaleInfo:i}=t,{tileInfo:r}=e;return(0,c.My)(i,r)}}},attributes:{id:{type:h.pe.UNSIGNED_BYTE,count:3,pack:"id"},pos:{type:h.pe.SHORT,count:2,pack:"position",packPrecisionFactor:10},bitset:{type:h.pe.UNSIGNED_BYTE,count:1},color:{type:h.pe.UNSIGNED_BYTE,count:4,normalized:!0,pack:t=>{let{color:e}=t;return(0,c.Jb)(e)}},offset:{type:h.pe.BYTE,count:2,packPrecisionFactor:16,packTessellation:t=>{let{extrusionOffsetX:e,extrusionOffsetY:i}=t;return[(0,c.By)(e,16),(0,c.By)(i,16)]}},normal:{type:h.pe.BYTE,count:2,packPrecisionFactor:16,packTessellation:t=>{let{normalX:e,normalY:i}=t;return[(0,c.By)(e,16),(0,c.By)(i,16)]}},halfWidth:{type:h.pe.HALF_FLOAT,count:1,pack:t=>{let{width:e}=t;return(0,r.Lz)(.5*e)}},referenceHalfWidth:{type:h.pe.HALF_FLOAT,count:1,pack:t=>{let{referenceWidth:e}=t;return(0,r.Lz)(.5*e)}}}};class f{constructor(){this.id=0,this.bitset=0,this.indexCount=0,this.vertexCount=0,this.vertexFrom=0,this.vertexBounds=0,this.pathLength=0,this.distanceOffset=0}}const x=65535;class y extends l.r{constructor(t,e,i,r){super(t,e,i,r),this.vertexSpec=d,this._currentWrite=new f,this._tessellationOptions={halfWidth:0,pixelCoordRatio:1,offset:0,wrapDistance:x,textured:!1},this._tessParams=new p,this._initializeTessellator()}writeLineVertices(t,e,i){const r=this._getLines(e);null!=r&&this._writeVertices(t,i,r)}_initializeTessellator(){this._lineTessellator=new o.i(this._writeTesselatedVertex.bind(this),this._writeTriangle.bind(this),!0)}_write(t,e,i){const r=null!==i&&void 0!==i?i:n.z.fromFeatureSetReaderCIM(e);r&&this._writeGeometry(t,e,r)}_writeGeometry(t,e,i,r){t.recordStart(this.instanceId,this.attributeLayout,r),this.writeLineVertices(t,i,e),t.recordEnd()}_getLines(t){return(0,a.uS)(t,(0,u.Z0)(this.evaluatedMeshParams))}_writeVertices(t,e,i){const{_currentWrite:n,_tessellationOptions:o,evaluatedMeshParams:a}=this,{width:l,capType:u,joinType:h,miterLimit:p,hasSizeVV:d}=a,f=(0,r.Lz)(.5*l);o.halfWidth=f,o.capType=(0,c.ue)(u),o.joinType=(0,c.qE)(h),o.miterLimit=p;const y=!d;n.out=t,n.id=e.getDisplayId(),n.vertexCount=0,n.indexCount=0,n.vertexFrom=t.vertexCount(),n.vertexBounds=y&&f<s.Gh?0:1;for(const{line:r,start:s,pathLength:c}of i)o.initialDistance=s%x,n.pathLength=c,n.distanceOffset=Math.floor(s/x)*x,this._lineTessellator.tessellate(r,o,y)}_writeTesselatedVertex(t,e,i,r,n,s,o,a,c,l,u){const{out:h,id:p,vertexBounds:d,pathLength:f,distanceOffset:x}=this._currentWrite;return this.hasEffects&&h.recordBounds(t,e,d,d),this._tessParams.extrusionOffsetX=o,this._tessParams.extrusionOffsetY=a,this._tessParams.normalX=c,this._tessParams.normalY=l,this._tessParams.directionX=n,this._tessParams.directionY=s,this._tessParams.distance=u,this._tessParams.pathLength=f,this._tessParams.distanceOffset=x,this._writeVertex(h,p,t,e,this._tessParams),this._currentWrite.vertexFrom+this._currentWrite.vertexCount++}_writeTriangle(t,e,i){const{out:r}=this._currentWrite;r.indexEnsureSize(3),r.indexWrite(t),r.indexWrite(e),r.indexWrite(i),this._currentWrite.indexCount+=3}}},71976:(t,e,i)=>{i.d(e,{A:()=>r});class r{constructor(t){this.size=0,this._start=0,this.maxSize=t,this._buffer=new Array(t)}get entries(){return this._buffer}enqueue(t){if(this.size===this.maxSize){const e=this._buffer[this._start];return this._buffer[this._start]=t,this._start=(this._start+1)%this.maxSize,e}return this._buffer[(this._start+this.size++)%this.maxSize]=t,null}dequeue(){if(0===this.size)return null;const t=this._buffer[this._start];return this._buffer[this._start]=null,this.size--,this._start=(this._start+1)%this.maxSize,t}peek(){return 0===this.size?null:this._buffer[this._start]}peekLast(){return 0===this.size?null:this._buffer[(this._start+(this.size-1))%this.maxSize]}find(t){if(0===this.size)return null;for(const e of this._buffer)if(null!=e&&t(e))return e;return null}clear(t){let e=this.dequeue();for(;null!=e;)t&&t(e),e=this.dequeue()}}},81320:(t,e,i)=>{i.d(e,{k:()=>o});var r=i(98231),n=i(93345);const s={createComputedParams:t=>t,optionalAttributes:{},attributes:{id:{type:n.pe.UNSIGNED_BYTE,count:3,pack:"id"},bitset:{type:n.pe.UNSIGNED_BYTE,count:1},pos:{type:n.pe.SHORT,count:2,pack:"position",packPrecisionFactor:10},inverseArea:{type:n.pe.FLOAT,count:1,packTessellation:t=>{let{inverseArea:e}=t;return e}}}};class o extends r.N{constructor(){super(...arguments),this.vertexSpec=s}createTesselationParams(t){return{inverseArea:1/t.readGeometryArea()}}}},81377:(t,e,i)=>{i.d(e,{V:()=>l});var r=i(84735),n=i(16108),s=i(71275),o=i(47904),a=i(401);const c=96/72;class l{static executeEffects(t,e,i,r){const n=c,l=(0,a.ll)(t);let u=new s.kT(e);for(const s of t){const t=(0,o.A)(s);t&&(u=t.execute(u,s,n,i,l,r))}return u}static applyEffects(t,e){if(!t)return e;const i=(0,a.ll)(t);let c,l=new s.kT(r.z.fromJSONCIM(e));for(const r of t){const t=(0,o.A)(r);t&&(l=t.execute(l,r,1,null,i,!1))}const u=[];let h=null;for(;c=l.next();)u.push(...(0,n.x)(c)),h=c.geometryType;return 0===u.length||null===h?null:"esriGeometryPolygon"===h?{rings:u}:{paths:u}}}},81615:(t,e,i)=>{i.d(e,{G8:()=>L,GJ:()=>m});var r=i(89379),n=i(15941),s=i(76931),o=i(84735),a=i(33443),c=i(71447),l=i(5095),u=i(40392),h=i(28736),p=i(12258),d=i(90113),f=i(97763);class x{constructor(t){const{offsetX:e,offsetY:i,postAngle:r,fontSize:n,haloSize:s,outlineSize:o,scaleFactor:a,transforms:c}=t;if(this.offsetX=e,this.offsetY=i,this.postAngle=r,this.fontSize=Math.min(n,96),this.haloSize=null!==s&&void 0!==s?s:0,this.outlineSize=null!==o&&void 0!==o?o:0,this.transforms=c,c&&c.infos.length>1){const t=(0,f.zb)(n,r,!1,e,i,c,!1);this.fontSize=Math.min(t.size,96);const s=t.size/n;this.haloSize*=s,this.outlineSize*=s,this.postAngle=t.rotation,this.offsetX=t.offsetX,this.offsetY=t.offsetY}a&&(this.fontSize*=a,this.offsetX*=a,this.offsetY*=a)}}var y=i(93345);const m=28,_=[4,4],v=[16,4],g={topLeft:v,topRight:v,bottomLeft:v,bottomRight:v},b=[4,2],k=[4,6],w={topLeft:b,topRight:b,bottomLeft:k,bottomRight:k},S={topLeft:b,topRight:k,bottomLeft:b,bottomRight:k},T={topLeft:k,topRight:k,bottomLeft:_,bottomRight:_},A={topLeft:_,topRight:_,bottomLeft:k,bottomRight:k},P={topLeft:k,topRight:_,bottomLeft:k,bottomRight:_},M={topLeft:_,topRight:k,bottomLeft:_,bottomRight:k},z={createComputedParams:t=>t,optionalAttributes:{zoomRange:{type:y.pe.UNSIGNED_SHORT,count:2,packPrecisionFactor:l.fq,packTessellation:t=>{let{minZoom:e,maxZoom:i}=t;return[e||0,i||m]}},clipAngle:{type:y.pe.UNSIGNED_BYTE,count:1,packTessellation:t=>{let{clipAngle:e}=t;return E(e||0)}},referenceSymbol:{type:y.pe.BYTE,count:4,packPrecisionFactor:1,packTessellation:(t,e)=>{const i=t.isLineLabel||!t.referenceBounds,r=(0,c.iT)(i?"center":e.horizontalAlignment),n=(0,c.Dy)(i?"middle":e.verticalAlignment),{offsetX:o,offsetY:a,size:l}=i?{offsetX:0,offsetY:0,size:0}:t.referenceBounds;return[(0,s.Lz)(o),-(0,s.Lz)(a),Math.round((0,s.Lz)(l)),r+1<<2|n+1]}},visibility:{type:y.pe.FLOAT,count:1,otherSource:!0}},attributes:{pos:{type:y.pe.SHORT,count:2,pack:"position",packPrecisionFactor:10},id:{type:y.pe.UNSIGNED_BYTE,count:3,pack:"id"},bitset:{type:y.pe.UNSIGNED_BYTE,count:1,packTessellation:t=>{let{isBackground:e,mapAligned:i}=t;return(0,h.xo)([[d.bg,e],[d.ti,!!i]])}},offset:{type:y.pe.SHORT,count:2,packPrecisionFactor:8,packAlternating:{count:4,packTessellation:t=>{let{offsets:e}=t;const{bottomLeft:i,bottomRight:r,topLeft:n,topRight:s}=e;return[n,s,i,r]}}},textureUV:{type:y.pe.SHORT,count:2,packPrecisionFactor:4,packAlternating:{count:4,packTessellation:t=>{let{texcoords:e}=t;const{bottomLeft:i,bottomRight:r,topLeft:n,topRight:s}=e;return[n,s,i,r]}}},color:{type:y.pe.UNSIGNED_BYTE,count:4,normalized:!0,packTessellation:t=>{let{color:e}=t;return e}},fontAndReferenceSize:{type:y.pe.UNSIGNED_SHORT,count:2,packPrecisionFactor:4,packTessellation:(t,e)=>{let{fontSize:i}=t,{referenceSize:r}=e;return[Math.round((0,s.Lz)(i)),Math.round((0,s.Lz)(null!==r&&void 0!==r?r:i))]}},outlineColor:{type:y.pe.UNSIGNED_BYTE,count:4,normalized:!0,pack:t=>{let{outlineColor:e}=t;return(0,h.Jb)(e)}},haloColor:{type:y.pe.UNSIGNED_BYTE,count:4,normalized:!0,pack:t=>{let{haloColor:e}=t;return(0,h.Jb)(e)}},outlineAndHaloSize:{type:y.pe.UNSIGNED_SHORT,count:2,packPrecisionFactor:4,packTessellation:t=>{let{outlineSize:e,haloSize:i}=t;return[Math.round((0,s.Lz)(e)),Math.round((0,s.Lz)(i))]}}}};class L extends p.r{constructor(){super(...arguments),this.vertexSpec=z,this._textMeshParamsPropsInitialized=!1}ensurePacked(t,e,i){super.ensurePacked(t,e,i),this._textMeshParamsPropsInitialized&&!this._evaluator.hasDynamicProperties||(this._textMeshTransformProps=new x(this.evaluatedMeshParams),this._textMeshParamsPropsInitialized=!0)}_write(t,e,i){const r=this._getShaping();if(!r)return;const n=e.getDisplayId();if(null!=this.evaluatedMeshParams.placement)return this._writePlacedTextMarkers(t,e,r,i);if(null!==i&&void 0!==i&&i.nextPath())return i.nextPoint(),this._writeGlyphs(t,n,i.x,i.y,r,0);if("esriGeometryPolygon"===e.geometryType){const i=e.readCentroidForDisplay();if(!i)return;const[s,o]=i.coords;return this._writeGlyphs(t,n,s,o,r,0)}if("esriGeometryMultipoint"===e.geometryType){const i=e.readGeometryForDisplay();return void(null===i||void 0===i||i.forEachVertex((e,i)=>this._writeGlyphs(t,n,e,i,r,0)))}const s=e.readXForDisplay(),o=e.readYForDisplay();return this._writeGlyphs(t,n,s,o,r,0)}_writePlacedTextMarkers(t,e,i,r){const n=null!==r&&void 0!==r?r:o.z.fromFeatureSetReaderCIM(e);if(!n)return;const c=a.l.getPlacement(n,-1,this.evaluatedMeshParams.placement,(0,s.Lz)(1),t.id);if(!c)return;const l=e.getDisplayId();let u=c.next();for(;null!=u;){const e=u.tx,r=-u.ty,n=-u.getAngle();this._writeGlyphs(t,l,e,r,i,n),u=c.next()}}_getShaping(t){var e;const i=this._textMeshTransformProps,r=this.evaluatedMeshParams;if(null===(e=r.glyphs)||void 0===e||!e.glyphs.length)return null;const o=(0,s.Lz)(i.fontSize),a=(0,s.Lz)(i.offsetX),c=(0,s.Lz)(i.offsetY),h=(0,n.qE)((0,s.Lz)(r.lineWidth),l.GR,l.cp),p=l.DY*(0,n.qE)(r.lineHeightRatio,.25,4);return(0,u.Tl)(r.glyphs,{scale:o/l.eG,angle:i.postAngle,xOffset:a,yOffset:c,horizontalAlignment:r.horizontalAlignment,verticalAlignment:t||r.verticalAlignment,maxLineWidth:h,lineHeight:p,decoration:r.decoration,borderLineSizePx:(0,s.Lz)(r.boxBorderLineSize),hasBackground:!!r.boxBackgroundColor,useCIMAngleBehavior:r.useCIMAngleBehavior})}_writeGlyphs(t,e,i,n,o,a,c,l){let u=!(arguments.length>8&&void 0!==arguments[8])||arguments[8];const p=this.evaluatedMeshParams,d=this._textMeshTransformProps,f=(0,s.Lz)(d.fontSize),x=d.haloSize,y=d.outlineSize,m=(0,s.Lz)(d.offsetX),_=(0,s.Lz)(d.offsetY),[v,g]=(0,h.My)(p.scaleInfo,this.getTileInfo());0!==a&&o.setRotation(a);const b=o.bounds,k=i+b.x+m,w=n+b.y-_,S=2*(p.minPixelBuffer?p.minPixelBuffer/f:1),T=Math.max(b.width,b.height)*S;o.textBox&&(t.recordStart(this.instanceId,this.attributeLayout,o.glyphs[0].textureBinding),u&&t.recordBounds(k,w,T,T),this._writeTextBox(t,e,i,n,o.textBox,c,l),t.recordEnd());for(const s of o.glyphs){t.recordStart(this.instanceId,this.attributeLayout,s.textureBinding),u&&t.recordBounds(k,w,T,T);const{texcoords:o,offsets:a}=s;this._writeQuad(t,e,i,n,(0,r.A)({texcoords:o,offsets:a,fontSize:f,haloSize:x,outlineSize:y,color:(0,h.Jb)(p.color),isBackground:!1,referenceBounds:c,minZoom:v,maxZoom:g},l)),t.recordEnd()}0!==a&&o.setRotation(-a)}_writeTextBox(t,e,i,n,s,o,a){const c=this.evaluatedMeshParams,{fontSize:l,haloSize:u,outlineSize:p}=this._textMeshTransformProps,{boxBackgroundColor:d,boxBorderLineColor:f}=c,x=(0,r.A)({isBackground:!0,fontSize:l,haloSize:u,outlineSize:p,referenceBounds:o},a);d&&(this._writeQuad(t,e,i,n,(0,r.A)({texcoords:g,offsets:s.main,color:(0,h.Jb)(d)},x)),f||(this._writeQuad(t,e,i,n,(0,r.A)({texcoords:T,offsets:s.top,color:(0,h.Jb)(d)},x)),this._writeQuad(t,e,i,n,(0,r.A)({texcoords:A,offsets:s.bot,color:(0,h.Jb)(d)},x)),this._writeQuad(t,e,i,n,(0,r.A)({texcoords:P,offsets:s.left,color:(0,h.Jb)(d)},x)),this._writeQuad(t,e,i,n,(0,r.A)({texcoords:M,offsets:s.right,color:(0,h.Jb)(d)},x)))),f&&(this._writeQuad(t,e,i,n,(0,r.A)({texcoords:w,offsets:s.top,color:(0,h.Jb)(f)},x)),this._writeQuad(t,e,i,n,(0,r.A)({texcoords:w,offsets:s.bot,color:(0,h.Jb)(f)},x)),this._writeQuad(t,e,i,n,(0,r.A)({texcoords:S,offsets:s.left,color:(0,h.Jb)(f)},x)),this._writeQuad(t,e,i,n,(0,r.A)({texcoords:S,offsets:s.right,color:(0,h.Jb)(f)},x)))}_writeQuad(t,e,i,r,n){const s=t.vertexCount();this._writeVertex(t,e,i,r,n),t.indexWrite(s+0),t.indexWrite(s+1),t.indexWrite(s+2),t.indexWrite(s+1),t.indexWrite(s+3),t.indexWrite(s+2)}}const E=t=>Math.round(t*(254/360))},83936:(t,e,i)=>{i.d(e,{$:()=>o,U:()=>a});var r=i(28736),n=i(43282),s=i(12258);class o extends s.r{}function a(t){const{sprite:e,isMapAligned:i,colorLocked:s,scaleSymbolsProportionally:o,isStroke:a}=t;let c=0;return i&&(c|=(0,r.mR)(n.c.bitset.isMapAligned)),s&&(c|=(0,r.mR)(n.c.bitset.colorLocked)),e.sdf&&(c|=(0,r.mR)(n.c.bitset.isSDF)),o&&(c|=(0,r.mR)(n.c.bitset.scaleSymbolsProportionally)),a&&(c|=(0,r.mR)(n.c.bitset.isStroke)),c}},88075:(t,e,i)=>{i.d(e,{S:()=>b});var r=i(89379),n=i(28808),s=i(5095),o=i(98231),a=i(13720),c=i(4037),l=i(76460),u=i(15941),h=i(76931);class p{constructor(t,e){this._size=t,this._sizeUnits=e,this._relativeSize=null}get relativeSize(){var t;return null!==(t=this._relativeSize)&&void 0!==t||(this._relativeSize=this.calculateRelativeSize()),this._relativeSize}calculateRelativeSize(){if(this._sizeUnits===n.O.Relative){const t=Math.min(this._size/100,1);return[t,t]}return this.calculateRelativeSizeFromAbsolute()}}class d extends p{constructor(t,e,i,r){super(e,i),this.rotationMatrix00=1,this.rotationMatrix01=0,this.rotationMatrix10=0,this.rotationMatrix11=1,this.bounds={xmin:1/0,ymin:1/0,xmax:-1/0,ymax:-1/0},this.rotationMatrix00=Math.cos(r),this.rotationMatrix01=-Math.sin(r),this.rotationMatrix10=-this.rotationMatrix01,this.rotationMatrix11=this.rotationMatrix00;const{bounds:n,rotationMatrix00:s,rotationMatrix01:o,rotationMatrix10:a,rotationMatrix11:c}=this;t.forEachVertex((t,e)=>{const i=t*s+e*o,r=t*a+e*c;n.xmin=Math.min(n.xmin,i),n.ymin=Math.min(n.ymin,r),n.xmax=Math.max(n.xmax,i),n.ymax=Math.max(n.ymax,r)}),this.center=[(n.xmin+n.xmax)/2,(n.ymin+n.ymax)/2]}}class f extends d{constructor(t,e,i,r){super(t,e,i,r),this.method="linear"}getRelativePosition(t,e){const{rotationMatrix00:i,rotationMatrix01:r,bounds:n}=this,{xmin:s,xmax:o}=n;return[(t*i+e*r-s)/(o-s),0]}calculateRelativeSizeFromAbsolute(){const{_size:t,bounds:e}=this,{xmin:i,xmax:r}=e;return[(0,h.Lz)(t)/(r-i),0]}}class x extends d{constructor(t,e,i,r){super(t,e,i,r),this.method="rectangular"}getRelativePosition(t,e){const{bounds:i,center:r,rotationMatrix00:n,rotationMatrix01:s,rotationMatrix10:o,rotationMatrix11:a}=this,c=t*o+e*a,l=t*n+e*s-r[0],u=c-r[1];return[l*(2/(i.xmax-i.xmin)),-u*(2/(i.ymax-i.ymin))]}calculateRelativeSizeFromAbsolute(){const{_size:t,bounds:e}=this,{xmin:i,ymin:r,xmax:n,ymax:s}=e;return[(0,h.Lz)(2*t)/(n-i),(0,h.Lz)(2*t)/(s-r)]}}class y extends d{constructor(t,e,i){super(t,e,i,0),this.method="circular";const{xmin:r,xmax:n,ymin:s,ymax:o}=this.bounds,a=n-r,c=o-s;this.radius=Math.sqrt(a*a+c*c)/2}getRelativePosition(t,e){const{center:i,radius:r}=this;return[(t-i[0])/r,-(e-i[1])/r]}calculateRelativeSizeFromAbsolute(){const{_size:t}=this;return[(0,h.Lz)(t)/this.radius,0]}}function m(t,e){if(null==t)return null;const i=(0,u.kU)(e.angle),r=e.gradientSize,n=e.gradientSizeUnits;switch(e.gradientMethod.toLowerCase()){case"linear":return new f(t,r,n,i);case"rectangular":return new x(t,r,n,i);case"circular":return new y(t,r,n);default:return l.A.getLogger("esri.views.2d.engine.webgl.shaderGraph.techniques.fill.GradientSizeHelper").errorOnce('Gradient fill method "'.concat(e.gradientMethod,'" currently unsupported.')),null}}var _=i(28736),v=i(93345);const g={createComputedParams:t=>t,optionalAttributes:a.v.optionalAttributes,attributes:(0,r.A)((0,r.A)({},a.v.attributes),{},{bitset:{type:v.pe.UNSIGNED_BYTE,count:1,pack:t=>{let{gradientSizeUnits:e,gradientType:i}=t,r=0;return e===n.O.Absolute&&(r|=(0,_.mR)(c.Q.isAbsolute)),"discrete"===i.toLowerCase()&&(r|=(0,_.mR)(c.Q.isDiscrete)),r}},tlbr:{count:4,type:v.pe.UNSIGNED_SHORT,pack:t=>{let{sprite:e}=t;const{rect:i,width:r,height:n}=e,o=i.x+s.hM+s.MZ,a=i.y+s.hM;return[o,a,o+r-2*s.MZ,a+n]}},relativePosition:{count:2,type:v.pe.HALF_FLOAT,packTessellation:(t,e,i,r)=>{var n;let{gradientStats:s}=t;return null!==(n=null===s||void 0===s?void 0:s.getRelativePosition(i,r))&&void 0!==n?n:[0,0]}},relativeGradientSize:{count:2,type:v.pe.HALF_FLOAT,packTessellation:t=>{var e;let{gradientStats:i}=t;return null!==(e=null===i||void 0===i?void 0:i.relativeSize)&&void 0!==e?e:[1,1]}},gradientMethod:{count:1,type:v.pe.UNSIGNED_BYTE,pack:t=>{let{gradientMethod:e}=t;switch(e.toLowerCase()){case"rectangular":return c.m.rectangular;case"circular":return c.m.circular;default:return c.m.linear}}}})};class b extends o.N{constructor(){super(...arguments),this.vertexSpec=g}get _preventEffectClipping(){return!0}createTesselationParams(t){return{gradientStats:m(this._unclippedGeometry,this.evaluatedMeshParams)}}_write(t,e,i){var r,n;const s=null!==(r=null===i||void 0===i?void 0:i.asOptimized())&&void 0!==r?r:e.readGeometryForDisplay();this._unclippedGeometry=s;const o=this._clip(s);if(!o)return void(this._unclippedGeometry=null);const a=null===(n=this.evaluatedMeshParams.sprite)||void 0===n?void 0:n.textureBinding;t.recordStart(this.instanceId,this.attributeLayout,a),this._writeGeometry(t,e,o),this._unclippedGeometry=null,t.recordEnd()}}},95776:(t,e,i)=>{i.d(e,{A:()=>s,J:()=>n});var r=i(88685);function n(t,e){let i;if("string"==typeof t)i=(0,r.Wm)(t+"-seed(".concat(e,")"));else{let r=12;i=t^e;do{i=107*(i>>8^i)+r|0}while(0!==--r)}return(1+i/(1<<31))/2}function s(t){return Math.floor(n(t,o)*a)}const o=53290320,a=10},98112:(t,e,i)=>{i.d(e,{h:()=>o});var r=i(12258),n=i(93345);const s={createComputedParams:t=>t,optionalAttributes:{},attributes:{pos:{type:n.pe.SHORT,count:2,pack:"position",packPrecisionFactor:10},id:{type:n.pe.UNSIGNED_BYTE,count:3,pack:"id"},bitset:{type:n.pe.UNSIGNED_BYTE,count:1},offset:{type:n.pe.BYTE,count:2,packAlternating:{count:4,pack:()=>[[-1,-1],[1,-1],[-1,1],[1,1]]}}}};class o extends r.r{constructor(){super(...arguments),this.vertexSpec=s}_write(t,e){t.recordStart(this.instanceId,this.attributeLayout);const i=e.getDisplayId();if("esriGeometryPoint"===e.geometryType){const r=e.readXForDisplay(),n=e.readYForDisplay();this._writeQuad(t,i,r,n)}else if("esriGeometryMultipoint"===e.geometryType){const r=e.readGeometryForDisplay();null===r||void 0===r||r.forEachVertex((e,r)=>{e>=0&&e<=512&&r>=0&&r<=512&&this._writeQuad(t,i,e,r)})}t.recordEnd()}_writeQuad(t,e,i,r){const n=t.vertexCount();this._writeVertex(t,e,i,r),t.indexWrite(n+0),t.indexWrite(n+1),t.indexWrite(n+2),t.indexWrite(n+1),t.indexWrite(n+3),t.indexWrite(n+2)}}},98231:(t,e,i)=>{i.d(e,{N:()=>c});var r=i(81806),n=i(51703),s=i(35797),o=i(12258);const a=(0,r.A)("featurelayer-fast-triangulation-enabled");class c extends o.r{async loadDependencies(){await Promise.all([super.loadDependencies(),(0,n.F)()])}_write(t,e,i){var r;const n=null!==(r=null===i||void 0===i?void 0:i.asOptimized())&&void 0!==r?r:e.readGeometryForDisplay(),s=this._clip(n);s&&(t.recordStart(this.instanceId,this.attributeLayout),this._writeGeometry(t,e,s),t.recordEnd())}_clip(t){if(!t)return null;const e=this.hasEffects;return(0,s.FE)(t,e?256:8)}_writeGeometry(t,e,i){const r=i.maxLength>100,n=[],o=this.createTesselationParams(e);if(!r&&a&&(0,s.lO)(n,i))return void(n.length&&this._writeVertices(t,e,i.coords,o,n));const c=(0,s.XZ)(i);this._writeVertices(t,e,c,o)}_writeVertices(t,e,i,r,n){const s=e.getDisplayId(),o=t.vertexCount(),a=this.hasEffects;let c=0;if(n)for(const l of n){const e=i[2*l],n=i[2*l+1];a&&t.recordBounds(e,n,0,0),this._writeVertex(t,s,e,n,r),c++}else for(let l=0;l<i.length;l+=2){const e=Math.round(i[l]),n=Math.round(i[l+1]);a&&t.recordBounds(e,n,0,0),this._writeVertex(t,s,e,n,r),c++}t.indexEnsureSize(c);for(let l=0;l<c;l++)t.indexWrite(l+o)}}}}]);
//# sourceMappingURL=9118.92bab7db.chunk.js.map